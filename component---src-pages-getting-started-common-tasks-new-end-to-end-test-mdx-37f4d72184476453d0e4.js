(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"3dLD":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a("q1tI"),n=a.n(s),r=a("Wbzz");function i(e){var t=e.item;return t.href?n.a.createElement("li",{key:t.name},n.a.createElement(r.Link,{to:t.href},t.name)):n.a.createElement("li",{key:t.name},t.name," (future)")}function c(e){var t=e.items,a=e.isSublist,s=void 0!==a&&a;return t.length?n.a.createElement("ul",{className:"site-c-sidenav-list"},t.map((function(e){return e.items?n.a.createElement("li",{key:e.name},s&&n.a.createElement(i,{item:e}),!s&&n.a.createElement("h2",{className:"heading-level-4"},e.name),n.a.createElement(c,{isSublist:!0,items:e.items})):n.a.createElement(i,{item:e,key:e.name})}))):null}var l=a("MEl4"),o=a.n(l);function b(e){var t=e.location,a=o.a.sections.find((function(e){return t.pathname.includes(e.href)}));return a?n.a.createElement("div",{className:"vads-l-col--4 site-c-content__nav"},n.a.createElement("div",{className:"site-c-sidenav"},n.a.createElement(c,{items:a.items}))):null}function p(e){var t=e.sourceUrl;return t?n.a.createElement("div",null,n.a.createElement("i",{class:"fa fa-edit","aria-hidden":"true"})," ",n.a.createElement("a",{href:t},"Edit this page on GitHub")):null}var m=a("8FPV");function u(e){var t=e.children,a=e.location,s=e.pageContext;return n.a.createElement(m.a,{location:a},n.a.createElement("div",{className:"vads-l-row"},n.a.createElement(b,{location:a}),n.a.createElement("div",{id:"main-content",className:"vads-l-col--8 site-c-content__content docSearch-content"},t,n.a.createElement(p,{sourceUrl:s.sourceUrl}))))}},EWft:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return i})),a.d(t,"default",(function(){return o}));var s=a("zLVn"),n=(a("q1tI"),a("7ljp")),r=a("3dLD"),i={},c={_frontmatter:i},l=r.a;function o(e){var t=e.components,a=Object(s.a)(e,["components"]);return Object(n.b)(l,Object.assign({},c,a,{components:t,mdxType:"MDXLayout"}),Object(n.b)("h1",{id:"writing-an-end-to-end-test"},"Writing an end-to-end test"),Object(n.b)("p",null,"Front end engineers use end-to-end (e2e) tests in ",Object(n.b)("inlineCode",{parentName:"p"},"vets-website")," to validate multipage applications with client-side routing. They are primarily used to assert that:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"client applications render their inputs"),Object(n.b)("li",{parentName:"ul"},"client-side navigation occurs when the required fields are populated")),Object(n.b)("h2",{id:"end-to-end-testing-overview"},"End-to-end testing overview"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"vets-website")," uses ",Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://www.cypress.io/"}),"Cypress")," to write end-to-end tests. See ",Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/va.gov-team/blob/master/platform/testing/end-to-end/cypress-best-practices-on-vsp.md"}),"Cypress Best Practices on VSP")," and ",Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/va.gov-team/blob/master/platform/testing/end-to-end/vsp-cypress-resources.md"}),"Cypress Resources Reference Guide")," for detailed use cases and documented helpers/mocks.",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Some older end-to-end tests were written in ",Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://nightwatchjs.org"}),"Nightwatch")," prior to Cypress. All new tests should be written using Cypress moving forward and Nightwatch tests are in the process of being deprecated/migrated to Cypress."),Object(n.b)("li",{parentName:"ul"},"Refer to the ",Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/va.gov-team/blob/master/platform/testing/end-to-end/cypress-migration-guide.md"}),"Cypress migration guide")," to convert old tests or write new tests."))),Object(n.b)("li",{parentName:"ul"},"End-to-end tests are ",Object(n.b)("strong",{parentName:"li"},"collocated in application folder")," with the application they test"),Object(n.b)("li",{parentName:"ul"},"Cypress tests can be run using the command ",Object(n.b)("inlineCode",{parentName:"li"},"yarn cy:run")," (after ",Object(n.b)("inlineCode",{parentName:"li"},"yarn watch")," to ",Object(n.b)("inlineCode",{parentName:"li"},"yarn build"),").")),Object(n.b)("h2",{id:"end-to-end-tests-conventions"},"End-to-end tests conventions"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Use a comment to indicate what page is being tested"),Object(n.b)("li",{parentName:"ul"},"Disable scrolling"),Object(n.b)("li",{parentName:"ul"},"Assert navigation is successful"),Object(n.b)("li",{parentName:"ul"},"Use functions from the helper file to perform all actions on the page")),Object(n.b)("p",null,Object(n.b)("em",{parentName:"p"},"These are recommendations, not requirements, except where labeled as 'REQUIRED'")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Separate navigation from field input",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Use a ",Object(n.b)("strong",{parentName:"li"},"main test file")," for navigation, assertions, and calls helpers"),Object(n.b)("li",{parentName:"ul"},"Use a ",Object(n.b)("strong",{parentName:"li"},"helper file")," for filling out forms"))),Object(n.b)("li",{parentName:"ul"},"Create separate, numbered ",Object(n.b)("strong",{parentName:"li"},"main test files")," to organize tests by their focus:",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"00-all-fields.cypress.spec.js")," - required and optional fields"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"01-required.cypress.spec.js")," - only required fields"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"02-accessibility.cypress.spec.js")," - validates accessibility"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"03-auth.cypress.spec.js")," - validates authentication"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"04-cross-cutting-feature.cypress.spec.js")," - validates one feature used across several pages (e.g. save in progress)"))),Object(n.b)("li",{parentName:"ul"},"Group tests by pages and use a comment to indicate what page is being tested"),Object(n.b)("li",{parentName:"ul"},"Mock all api responses before starting the test. See ",Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/va.gov-team/tree/master/platform/testing/end-to-end#mocks"}),"Mock API responses")),Object(n.b)("li",{parentName:"ul"},"Use ",Object(n.b)("inlineCode",{parentName:"li"},"waitForElementVisible")," before interacting with any element on the page"),Object(n.b)("li",{parentName:"ul"},"Use ",Object(n.b)("inlineCode",{parentName:"li"},"Timeouts")," constants for setting timeouts (",Object(n.b)("inlineCode",{parentName:"li"},"platform/testing/e2e/timeouts.js"),")"),Object(n.b)("li",{parentName:"ul"},"Use helpers for filling data and performing actions on the page"),Object(n.b)("li",{parentName:"ul"},"(",Object(n.b)("em",{parentName:"li"},"REQUIRED"),") Perform ",Object(n.b)("inlineCode",{parentName:"li"},"axeCheck")," on the main body of the application on each page - see ",Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/e2e/cypress/support/commands/axeCheck.js"}),"axeCheck")),Object(n.b)("li",{parentName:"ul"},"Assert that each navigation is successful")),Object(n.b)("h2",{id:"mocking-api-responses"},"Mocking API responses"),Object(n.b)("p",null,"A mock server runs with the end-to-end tests to allow tests to make production-like calls."),Object(n.b)("p",null,"See the ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/department-of-veterans-affairs/va.gov-team/blob/master/platform/testing/end-to-end/vsp-cypress-resources.md#mocks"}),"Mocks section of Cypress Resources Reference Guide")," for detailed mock API examples currently used."),Object(n.b)("p",null,"Below are some of the commonly used Cypress mocks (accessible from the link above)."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"confirmedVA"),Object(n.b)("li",{parentName:"ul"},"confirmedCC"),Object(n.b)("li",{parentName:"ul"},"requests"),Object(n.b)("li",{parentName:"ul"},"cancelReasons"),Object(n.b)("li",{parentName:"ul"},"supportedSites"),Object(n.b)("li",{parentName:"ul"},"facilities"),Object(n.b)("li",{parentName:"ul"},"facilities983"),Object(n.b)("li",{parentName:"ul"},"clinicList983"),Object(n.b)("li",{parentName:"ul"},"slots"),Object(n.b)("li",{parentName:"ul"},"getVAAppointmentMock"),Object(n.b)("li",{parentName:"ul"},"getExpressCareRequestCriteriaMock"),Object(n.b)("li",{parentName:"ul"},"getParentSiteMock")),Object(n.b)("h2",{id:"custom-cypress-commands"},"Custom Cypress commands"),Object(n.b)("p",null,"Cypress supports extending its client api with ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/e2e/cypress/support/commands"}),"custom commands"),"."),Object(n.b)("p",null,"Below are some of the commonly used custom Cypress commands."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/e2e/cypress/support/commands/axeCheck.js"}),"axeCheck")," - Callback from a11y check that logs aXe violations to console output."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/e2e/cypress/support/commands/expandAccordions.js"}),"expandAccordions")," - Expands all accordions and AdditionalInfo components."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/e2e/cypress/support/commands/hasCount.js"}),"injectAxeThenAxeCheck")," - Combines two common, sequentially called functions."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/e2e/cypress/support/commands/login.js"}),"login")," - Simulates a logged in session."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/e2e/cypress/support/commands/syncFixtures.js"}),"syncFixtures")," - Runs task to sync fixtures under a temp path in the Cypress fixtures folder then overwrites ",Object(n.b)("inlineCode",{parentName:"li"},"cy.fixture")," and the fixture shorthand in ",Object(n.b)("inlineCode",{parentName:"li"},"cy.route")," to look for fixtures under that temp path."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/e2e/cypress/support/commands/upload.js"}),"upload")," - Workaround to support file upload functionality in tests, which is currently not officially implemented."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/e2e/cypress/support/commands/viewportPreset.js"}),"viewportPreset")," - Sets the viewport by preset name.")),Object(n.b)("h2",{id:"helpers"},"Helpers"),Object(n.b)("p",null,"The ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/department-of-veterans-affairs/va.gov-team/tree/master/platform/testing/end-to-end"}),"Cypress Resources Reference Guide")," contains a list of currently utilized Cypress & VAOS Helpers adn Appointment Helpers."))}o.isMDXComponent=!0},zLVn:function(e,t,a){"use strict";function s(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}a.d(t,"a",(function(){return s}))}}]);
//# sourceMappingURL=component---src-pages-getting-started-common-tasks-new-end-to-end-test-mdx-37f4d72184476453d0e4.js.map
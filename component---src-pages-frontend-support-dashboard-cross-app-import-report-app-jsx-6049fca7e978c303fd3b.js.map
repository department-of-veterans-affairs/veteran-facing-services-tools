{"version":3,"sources":["webpack:///./src/pages/frontend-support-dashboard/cross-app-import-report/app.jsx","webpack:///./src/components/sidebar/SidebarItems.jsx","webpack:///./src/components/sidebar/Sidebar.js","webpack:///./node_modules/@department-of-veterans-affairs/component-library/Table.js"],"names":["getAppImportData","importGraph","Object","keys","map","appName","appImports","platformImports","Set","platformFilesThatImportFromThisApp","file","split","importingFromApp","appsToTest","slice","join","appImportingFrom","appsThatThisAppImportsFrom","isIsolated","icon","className","aria-label","aria-hidden","crossAppImportFields","label","value","App","location","useState","crossAppImportData","setCrossAppImportData","useEffect","crossAppImports","appImportGraph","appImportData","totalAppCount","appsIsolated","stats","length","filter","app","percentIsolated","toFixed","id","data","fields","href","SidebarItem","item","key","name","to","SidebarItems","items","isSublist","Sidebar","sidebarSection","sidebarData","sections","find","section","pathname","includes","defineProperty","exports","_react","_interopRequireDefault","_classnames","obj","__esModule","borderClasses","_default","props","currentSort","ariaLabelledBy","createElement","role","field","nonSortable","scope","fa","order","rowIndex","concat","index","alignLeft","alignRight"],"mappings":"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","file":"component---src-pages-frontend-support-dashboard-cross-app-import-report-app-jsx-6049fca7e978c303fd3b.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Table from '@department-of-veterans-affairs/component-library/Table';\nimport Layout from '../../../layouts/Layout';\nimport Sidebar from '../../../components/sidebar/Sidebar';\nimport appImportGraph from './cross-app-imports.json';\n\n/**\n * Gets a check or 'x' icon based on the given status.\n *\n * @param {boolean} status - Determines whether to return check or x icon.\n * @returns {JSX.Element} Status icon.\n */\nconst getStatusIcon = status => {\n  const trueIcon = (\n    <span className=\"dash-true-icon\" aria-label=\"True Icon\">\n      <i className=\"fas fa-check-circle fa-2x\" aria-hidden=\"true\" />\n    </span>\n  );\n  const falseIcon = (\n    <span className=\"dash-false-icon\" aria-label=\"False Icon\">\n      <i className=\"fas fa-times-circle fa-2x\" aria-hidden=\"true\" />\n    </span>\n  );\n\n  return status ? trueIcon : falseIcon;\n};\n\n/**\n * Transforms import graph data for table.\n *\n * @param {Object} importGraph - Cross app import graph.\n * @returns {Object[]} Transformed import graph data.\n */\nconst getAppImportData = importGraph => {\n  return Object.keys(importGraph).map(appName => {\n    const appImports = importGraph[appName];\n\n    // Platform directory paths with files that import from the app.\n    const platformImports = [\n      ...new Set(\n        appImports.platformFilesThatImportFromThisApp.map(\n          file => `platform/${file.split('/')[2]}`,\n        ),\n      ),\n    ];\n\n    // Apps in 'appsToTest' let us know which apps import from the app in question.\n    // The app itself is always first in 'appsToTest', so we need to remove it.\n    const importingFromApp =\n      [...appImports.appsToTest.slice(1), ...platformImports].join(', ') ||\n      null;\n\n    // Apps that the app in question is importing from.\n    const appImportingFrom =\n      Object.keys(appImports.appsThatThisAppImportsFrom).join(', ') || null;\n\n    const isIsolated = !importingFromApp && !appImportingFrom;\n    const icon = getStatusIcon(isIsolated);\n\n    return { appName, importingFromApp, appImportingFrom, icon, isIsolated };\n  });\n};\n\n/**\n * Gets statistics of isolated apps from the given import data.\n *\n * @param {Object[]} appImportData - Transformed app import data.\n * @returns {Object} Object with stats on isolated apps.\n */\nconst getIsolationStats = appImportData => {\n  const totalAppCount = appImportData.length;\n  const appsIsolated = appImportData.filter(app => app.isIsolated).length;\n\n  const percentIsolated = ((appsIsolated / totalAppCount) * 100).toFixed(2);\n\n  return { appsIsolated, totalAppCount, percentIsolated };\n};\n\nconst crossAppImportFields = [\n  { label: 'Application', value: 'appName' },\n  { label: 'Places importing from application', value: 'importingFromApp' },\n  { label: 'Places application imports from', value: 'appImportingFrom' },\n  { label: 'Isolated', value: 'icon' },\n];\n\nconst App = ({ location }) => {\n  const [crossAppImportData, setCrossAppImportData] = useState([]);\n\n  useEffect(() => {\n    const processImports = () => {\n      const importGraph = appImportGraph;\n      const crossAppImports = getAppImportData(importGraph);\n\n      setCrossAppImportData(crossAppImports);\n    };\n\n    processImports();\n  }, []);\n\n  const stats = getIsolationStats(crossAppImportData);\n\n  return (\n    <Layout location={location}>\n      <div className=\"vads-l-row site-l-wrapper\">\n        <Sidebar location={location} />\n        <div\n          id=\"main-content-coverage\"\n          className=\"dash-coverage-table site-c-content__content docSearch-content vads-l-col--12\"\n        >\n          <h1>Frontend Support Dashboard</h1>\n          <h2>Cross App Import Report</h2>\n          <p>Last updated: March 8, 2022</p>\n          <p>\n            <strong>\n              {stats.appsIsolated} out of {stats.totalAppCount} (\n              {stats.percentIsolated} %) application directories are isolated\n            </strong>\n          </p>\n\n          <Table data={crossAppImportData} fields={crossAppImportFields} />\n\n          <p>\n            Report file (\n            <a href=\"https://github.com/department-of-veterans-affairs/veteran-facing-services-tools/blob/master/packages/documentation/src/pages/frontend-support-dashboard/cross-app-import-report/cross-app-imports.json\">\n              cross-app-imports.json\n            </a>\n            ) generated by running <code>yarn check-app-imports</code>\n            in the{' '}\n            <a href=\"https://github.com/department-of-veterans-affairs/vets-website\">\n              vets-website\n            </a>{' '}\n            repository then uploaded to the{' '}\n            <a href=\"https://github.com/department-of-veterans-affairs/veteran-facing-services-tools/tree/master/packages/documentation/src/pages/frontend-support-dashboard/cross-app-import-report\">\n              veteran-facing-services-tools\n            </a>{' '}\n            repository.\n          </p>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport { Link } from 'gatsby';\n\n/**\n * Sidebar\n *\n * @param {props} props\n */\n\nfunction SidebarItem({ item }) {\n  if (item.href) {\n    return (\n      <li key={item.name}>\n        <Link to={item.href}>{item.name}</Link>\n      </li>\n    );\n  }\n  return <li key={item.name}>{item.name} (future)</li>;\n}\n\nexport default function SidebarItems({ items, isSublist = false }) {\n  if (!items.length) {\n    return null;\n  }\n\n  return (\n    <ul className=\"site-c-sidenav-list\">\n      {items.map(item => {\n        if (item.items) {\n          return (\n            <li key={item.name}>\n              {isSublist && <SidebarItem item={item} />}\n              {!isSublist && <h2 className=\"heading-level-4\">{item.name}</h2>}\n              <SidebarItems isSublist items={item.items} />\n            </li>\n          );\n        }\n        return <SidebarItem item={item} key={item.name} />;\n      })}\n    </ul>\n  );\n}\n","import React from 'react';\nimport SidebarItems from './SidebarItems';\nimport sidebarData from '../../sidebar';\n\n/**\n * Sidebar\n *\n * @param {props} props\n */\n\nexport default function Sidebar({ location }) {\n  const sidebarSection = sidebarData.sections.find(section =>\n    location.pathname.includes(section.href),\n  );\n\n  if (!sidebarSection) {\n    return null;\n  }\n\n  return (\n    <div className=\"vads-l-col--4 site-c-content__nav\">\n      <div className=\"site-c-sidenav\">\n        <SidebarItems items={sidebarSection.items} />\n      </div>\n    </div>\n  );\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar borderClasses = 'vads-u-border-top--0 vads-u-border-right--0 vads-u-border-left--0 vads-u-font-family--sans vads-u-padding--0 vads-u-padding-y--0p5 medium-screen:vads-u-padding--2';\nvar rowPaddingClass = 'vads-u-padding-y--2';\n\nfunction Table(props) {\n  var currentSort = props.currentSort,\n      fields = props.fields,\n      data = props.data,\n      ariaLabelledBy = props.ariaLabelledBy;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"table\", {\n    \"aria-labelledby\": ariaLabelledBy,\n    className: \"responsive\",\n    role: \"table\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"thead\", null, /*#__PURE__*/_react[\"default\"].createElement(\"tr\", {\n    role: \"row\"\n  }, fields.map(function (field) {\n    return field.nonSortable ? /*#__PURE__*/_react[\"default\"].createElement(\"th\", {\n      key: field.value\n    }, field.label) : /*#__PURE__*/_react[\"default\"].createElement(\"th\", {\n      key: field.value,\n      className: borderClasses,\n      role: \"columnheader\",\n      scope: \"col\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"button\", {\n      className: \"va-button-link vads-u-font-weight--bold vads-u-color--base vads-u-text-decoration--none\"\n    }, field.label, (currentSort === null || currentSort === void 0 ? void 0 : currentSort.value) === field.value && /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      className: (0, _classnames[\"default\"])({\n        fa: true,\n        'fas fa-caret-down': currentSort.order === 'DESC',\n        'fas fa-caret-up': currentSort.order === 'ASC'\n      })\n    })));\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, data.map(function (item, rowIndex) {\n    return /*#__PURE__*/_react[\"default\"].createElement(\"tr\", {\n      key: rowIndex,\n      className: \"\".concat(borderClasses, \" \").concat(rowPaddingClass),\n      role: \"row\"\n    }, fields.map(function (field, index) {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n        \"data-index\": index,\n        className: (0, _classnames[\"default\"])(borderClasses, {\n          'vads-u-text-align--left': field.alignLeft,\n          'medium-screen:vads-u-text-align--right': field.alignRight\n        }),\n        \"data-label\": field.label,\n        key: \"\".concat(rowIndex, \"-\").concat(field.label),\n        role: \"cell\"\n      }, item[field.value] === null ? '---' : item[field.value]);\n    }));\n  })));\n}\n\nvar _default = Table;\nexports[\"default\"] = _default;"],"sourceRoot":""}
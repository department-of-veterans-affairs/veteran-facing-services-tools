(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"3dLD":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("q1tI"),i=n.n(a),r=n("FRpb");function o(e){var t=e.sourceUrl;return t?i.a.createElement("div",null,i.a.createElement("i",{class:"fa fa-edit","aria-hidden":"true"})," ",i.a.createElement("a",{href:t},"Edit this page on GitHub")):null}var l=n("8FPV");function c(e){var t=e.children,n=e.location,a=e.pageContext;return i.a.createElement(l.a,{location:n},i.a.createElement("div",{className:"vads-l-row site-l-wrapper"},i.a.createElement(r.a,{location:n}),i.a.createElement("div",{id:"main-content",className:"vads-l-col--8 site-c-content__content docSearch-content"},t,i.a.createElement(o,{sourceUrl:a.sourceUrl}))))}},FRpb:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("q1tI"),i=n.n(a),r=n("Wbzz");function o(e){var t=e.item;return t.href?i.a.createElement("li",{key:t.name},i.a.createElement(r.Link,{to:t.href},t.name)):i.a.createElement("li",{key:t.name},t.name," (future)")}function l(e){var t=e.items,n=e.isSublist,a=void 0!==n&&n;return t.length?i.a.createElement("ul",{className:"site-c-sidenav-list"},t.map((function(e){return e.items?i.a.createElement("li",{key:e.name},a&&i.a.createElement(o,{item:e}),!a&&i.a.createElement("h2",{className:"heading-level-4"},e.name),i.a.createElement(l,{isSublist:!0,items:e.items})):i.a.createElement(o,{item:e,key:e.name})}))):null}var c=n("MEl4"),b=n.n(c);function s(e){var t=e.location,n=b.a.sections.find((function(e){return t.pathname.includes(e.href)}));return n?i.a.createElement("div",{className:"vads-l-col--4 site-c-content__nav"},i.a.createElement("div",{className:"site-c-sidenav"},i.a.createElement(l,{items:n.items}))):null}},Uxid:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return l})),n.d(t,"default",(function(){return s}));var a=n("zLVn"),i=(n("q1tI"),n("7ljp")),r=n("3dLD"),o=["components"],l={},c={_frontmatter:l},b=r.a;function s(e){var t=e.components,n=Object(a.a)(e,o);return Object(i.b)(b,Object.assign({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"set-up-vagov-locally"},"Set up VA.gov locally"),Object(i.b)("div",{className:"deprecation-message"},Object(i.b)("h2",null,"We're moving our docs!"),Object(i.b)("h3",null,"Find"," ",Object(i.b)("a",{href:"https://depo-platform-documentation.scrollhelp.site/developer-docs/Setting-up-your-local-frontend-environment.1844215878.html"},"the latest version of this page")," ","on the Platform website."),Object(i.b)("h3",null,"Still can't find what you're looking for? Reach out to"," ",Object(i.b)("a",{href:"https://dsva.slack.com/archives/CBU0KDSB1"},"#vfs-platform-support")," ","on Slack.")),Object(i.b)("p",null,"These instructions cover building and running VA.gov locally, including configuring any required dependencies."),Object(i.b)("h2",{id:"node-setup"},"Node setup"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Install ",Object(i.b)("inlineCode",{parentName:"p"},"nvm"),":"),Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"Mac:")),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",{parentName:"p",href:"http://brew.sh/"},"homebrew")," is recommended for installing ",Object(i.b)("inlineCode",{parentName:"p"},"nvm")," but other installation approaches are on ",Object(i.b)("a",{parentName:"p",href:"https://github.com/creationix/nvm#installation-and-update"},"nvm Github page"),"."),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ brew update && brew install nvm\n")),Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"Linux:")),Object(i.b)("p",{parentName:"li"},"To get the latest version of NVM visit the official page. ",Object(i.b)("a",{parentName:"p",href:"https://github.com/nvm-sh/nvm"},"NVM")),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash\n")),Object(i.b)("p",{parentName:"li"},"Follow the post-install instructions in the success message.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Install ",Object(i.b)("inlineCode",{parentName:"p"},"node 14.15.0")," (this also installs ",Object(i.b)("inlineCode",{parentName:"p"},"npm"),"):"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ nvm install 14.15.0\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Configure ",Object(i.b)("inlineCode",{parentName:"p"},"nvm")," to use ",Object(i.b)("inlineCode",{parentName:"p"},"node 14.15.0")," by default:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ nvm alias default 14.15.0\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Install ",Object(i.b)("inlineCode",{parentName:"p"},"yarn 1.21.1")," globally:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ npm i -g yarn@1.21.1\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Verify correct versions of ",Object(i.b)("inlineCode",{parentName:"p"},"node")," and ",Object(i.b)("inlineCode",{parentName:"p"},"yarn")," are installed:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ node --version # 14.15.0\n$ yarn --version # 1.21.1\n")))),Object(i.b)("h2",{id:"get-the-source-code"},"Get the source code"),Object(i.b)("ol",{start:6},Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Clone VA.gov git repos ",Object(i.b)("strong",{parentName:"p"},"as sibling directories"),":"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ git clone git@github.com:department-of-veterans-affairs/vets-website.git\n$ git clone git@github.com:department-of-veterans-affairs/vagov-content.git\n$ git clone git@github.com:department-of-veterans-affairs/content-build.git\n$ git clone git@github.com:department-of-veterans-affairs/vets-json-schema.git\n$ git clone git@github.com:department-of-veterans-affairs/veteran-facing-services-tools.git\n$ git clone git@github.com:department-of-veterans-affairs/vets-api.git\n$ git clone git@github.com:department-of-veterans-affairs/vets-api-mockdata.git\n")),Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"Front end repos")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"vets-website"),": Core front end platform and application code"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"vagov-content"),": Markdown content used to generate static pages"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"content-build"),": Liquid templates and content build for static pages"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"veteran-facing-services-tools"),": Shared front end components (including non VA.gov users) and front end documentation site")),Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"Back end repos")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"vets-api"),": Core Rails API server application code"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"vets-api-mockdata"),": Mock data used when running locally and on dev for the backend")),Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"Shared repos")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"vets-json-schema"),": Shared JSON Schema definitions used by form applications and the APIs that they consume")))),Object(i.b)("h2",{id:"start-up-the-front-end"},"Start up the front end"),Object(i.b)("h3",{id:"vets-website"},"vets-website"),Object(i.b)("p",null,"7a. Navigate to the ",Object(i.b)("inlineCode",{parentName:"p"},"vets-website")," repository, then install ",Object(i.b)("inlineCode",{parentName:"p"},"vets-website")," dependencies. See these ",Object(i.b)("a",{parentName:"p",href:"https://github.com/department-of-veterans-affairs/vets-website/blob/main/README.md"},"common commands")," for more information."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ cd vets-website\n$ yarn install\n")),Object(i.b)("p",null,"8a. Build ",Object(i.b)("inlineCode",{parentName:"p"},"vets-website"),". If you're only doing application work inside ",Object(i.b)("inlineCode",{parentName:"p"},"vets-website")," you can run the build command which contains the scaffolding option by default:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ yarn build\n")),Object(i.b)("p",null,"If you need the CSS and JS generated for work in ",Object(i.b)("inlineCode",{parentName:"p"},"content-build")," you can run a normal build:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ yarn build\n")),Object(i.b)("p",null,"9a. Start the local development server. If you are applying CSS and/or JS changes to a static page/template that renders\nin ",Object(i.b)("inlineCode",{parentName:"p"},"content-build"),", we recommend leaving this command running so you will be able to see the changes in ",Object(i.b)("inlineCode",{parentName:"p"},"content-build"),"."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ yarn watch\n")),Object(i.b)("p",null,"The watch is complete when the CLI says ",Object(i.b)("inlineCode",{parentName:"p"},"Compiled successfully"),"."),Object(i.b)("p",null,"If you would like webpack to open a browser window for you, please run ",Object(i.b)("inlineCode",{parentName:"p"},"yarn watch --open"),". We use ",Object(i.b)("a",{parentName:"p",href:"https://webpack.js.org/configuration/dev-server/"},"Webpack DevServer")," to watch and serve the files locally; all the same options and documentation should apply."),Object(i.b)("p",null,"10a. Open ",Object(i.b)("a",{parentName:"p",href:"http://localhost:3001"},"http://localhost:3001")," in a browser if you are working on an app;\notherwise, continue on to the ",Object(i.b)("a",{parentName:"p",href:"#content-build"},"content-build")," section for viewing changes in the browser."),Object(i.b)("h3",{id:"content-build"},"content-build"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"NOTE:")," In order to run ",Object(i.b)("inlineCode",{parentName:"p"},"content-build"),", you must first generate the CSS and JS files within ",Object(i.b)("inlineCode",{parentName:"p"},"vets-website"),"\n(follow steps above). If you don't, you will see a build error in the console instructing you to first\ngenerate files in ",Object(i.b)("inlineCode",{parentName:"p"},"vets-website"),". If you are applying CSS and/or JS changes to a static page/template that renders\nin ",Object(i.b)("inlineCode",{parentName:"p"},"content-build")," (like the homepage) you will need to run a watch in ",Object(i.b)("inlineCode",{parentName:"p"},"vet-website")," to view\nthe updates. The CSS and JS files within ",Object(i.b)("inlineCode",{parentName:"p"},"vets-website")," are locally connected through a symlink\nin the build process."),Object(i.b)("p",null,"If you don't need to locally view static pages and are just working on applications, you don't need to set this part up."),Object(i.b)("p",null,"7b. Navigate to the ",Object(i.b)("inlineCode",{parentName:"p"},"content-build")," repository, then install dependencies via ",Object(i.b)("inlineCode",{parentName:"p"},"yarn")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ cd content-build\n$ yarn install\n")),Object(i.b)("p",null,"8b. Build ",Object(i.b)("inlineCode",{parentName:"p"},"content-build"),". Make sure you ",Object(i.b)("a",{parentName:"p",href:"https://github.com/department-of-veterans-affairs/va.gov-team/blob/master/platform/engineering/internal-tools.md#configure-the-socks-proxy"},"configured the SOCKS proxy")," to fetch content from Drupal."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ yarn build\n")),Object(i.b)("p",null,"If you do not have access to the SOCKS proxy, you can alternately fetch the latest cached version of the content."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ yarn fetch-drupal-cache\n")),Object(i.b)("p",null,"9a. Start the local development server."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"$ yarn watch\n")),Object(i.b)("p",null,"The watch is complete when the CLI says ",Object(i.b)("inlineCode",{parentName:"p"},"Compiled successfully"),". If you just need a server running without\nwatching the metalsmith files you can run ",Object(i.b)("inlineCode",{parentName:"p"},"npx http-server . -p 3002")," inside ",Object(i.b)("inlineCode",{parentName:"p"},"/build/localhost")," to\nsave some CPU."),Object(i.b)("p",null,"10a. Open ",Object(i.b)("a",{parentName:"p",href:"http://localhost:3002"},"http://localhost:3002")," in a browser"),Object(i.b)("h2",{id:"backend-and-internal-tools-set-up"},"Backend and internal tools set up"),Object(i.b)("p",null,"Setting up the backend and internal tools allows local test account login and static content rendering."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",{parentName:"p",href:"https://github.com/department-of-veterans-affairs/vets-api"},Object(i.b)("strong",{parentName:"a"},"Backend (",Object(i.b)("inlineCode",{parentName:"strong"},"vets-api"),") set up")," instructions")),Object(i.b)("p",{parentName:"li"},"The local ",Object(i.b)("inlineCode",{parentName:"p"},"vets-website")," is configured to point to the ",Object(i.b)("inlineCode",{parentName:"p"},"vets-api")," backend at ",Object(i.b)("inlineCode",{parentName:"p"},"http://localhost:3000"),". Any website functionality that depends on the backend (i.e. login, save-in-progress, form submission, feature toggles) will require a locally running instance of ",Object(i.b)("inlineCode",{parentName:"p"},"vets-api"),".")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",{parentName:"p",href:"https://github.com/department-of-veterans-affairs/vets.gov-team/blob/master/Administrative/Accessing-Staging.md"},Object(i.b)("strong",{parentName:"a"},"Local test account login")," instructions"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",{parentName:"p",href:"internal-tools"},"Internal tools setup instructions")),Object(i.b)("p",{parentName:"li"},"This proxy setup is required to access static content locally and to access to our reporting and monitoring tools. Running the ",Object(i.b)("inlineCode",{parentName:"p"},"yarn watch")," task with the SOCKS proxy active will automatically pull and cache the static content for ",Object(i.b)("inlineCode",{parentName:"p"},"vets-website"),"."))))}s.isMDXComponent=!0},zLVn:function(e,t,n){"use strict";function a(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}n.d(t,"a",(function(){return a}))}}]);
//# sourceMappingURL=component---src-pages-getting-started-index-mdx-04dc8139908ab269079c.js.map
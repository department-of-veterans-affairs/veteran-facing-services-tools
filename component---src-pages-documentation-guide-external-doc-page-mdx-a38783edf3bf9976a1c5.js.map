{"version":3,"sources":["webpack:///./src/components/sidebar/SidebarItems.jsx","webpack:///./src/components/sidebar/Sidebar.js","webpack:///./src/components/pageFooter/Components.jsx","webpack:///./src/components/pageFooter/Documentation.jsx","webpack:///./src/components/pageFooter/PageFooter.jsx","webpack:///./src/layouts/SidebarLayout.jsx","webpack:///./src/pages/documentation-guide/external-doc-page.mdx"],"names":["ComponentList","query","render","data","SidebarItems","items","components","edges","map","comp","href","node","path","name","context","SidebarItem","item","key","to","isSublist","length","className","Sidebar","location","sidebarSection","sidebarData","sections","find","section","pathname","includes","componentToMatch","toLowerCase","ComponentItem","link","base","Components","splits","split","getPathName","pathName","replace","charAt","substring","Documentation","level1","indexmdx","Array","isArray","lvl2Item","getIndexMdx","PageFooter","class","aria-hidden","getGithubHref","SidebarLayout","children","Layout","id","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-documentation-guide-external-doc-page-mdx-a38783edf3bf9976a1c5.js","sourcesContent":["import React from 'react';\nimport { Link, StaticQuery, graphql } from 'gatsby';\n\n/**\n * Sidebar\n *\n * @param {props} props\n */\n\nfunction ComponentList() {\n  return (\n    <StaticQuery\n      query={graphql`\n        query ComponentListQuery {\n          components: allSitePage(\n            filter: { context: { source: { eq: \"component\" } } }\n            sort: { fields: [context___name], order: ASC }\n          ) {\n            edges {\n              node {\n                path\n                context {\n                  source\n                  name\n                }\n              }\n            }\n          }\n        }\n      `}\n      render={data => (\n        <SidebarItems\n          items={data.components.edges.map(comp => ({\n            href: comp.node.path,\n            name: comp.node.context.name,\n          }))}\n        />\n      )}\n    />\n  );\n}\n\nfunction SidebarItem({ item }) {\n  if (item.href) {\n    return (\n      <li key={item.name}>\n        <Link to={item.href}>{item.name}</Link>\n      </li>\n    );\n  }\n  return <li key={item.name}>{item.name} (future)</li>;\n}\nexport default function SidebarItems({ items, isSublist = false }) {\n  if (!items.length) {\n    return null;\n  }\n\n  return (\n    <ul className=\"site-c-sidenav-list\">\n      {items.map(item => {\n        if (item.items) {\n          return (\n            <li key={item.name}>\n              {isSublist && <SidebarItem item={item} />}\n              {!isSublist && <h2 className=\"heading-level-4\">{item.name}</h2>}\n              <SidebarItems isSublist items={item.items} />\n            </li>\n          );\n        }\n        if (item.query === 'componentList') {\n          return (\n            <li key={item.name}>\n              {isSublist && <SidebarItem item={item} />}\n              {!isSublist && <h2 className=\"heading-level-4\">{item.name}</h2>}\n              <ComponentList />\n            </li>\n          );\n        }\n        return <SidebarItem item={item} key={item.name} />;\n      })}\n    </ul>\n  );\n}\n","import React from 'react';\nimport SidebarItems from './SidebarItems';\nimport sidebarData from '../../sidebar';\n\n/**\n * Sidebar\n *\n * @param {props} props\n */\n\nexport default function Sidebar({ location }) {\n  const sidebarSection = sidebarData.sections.find(section =>\n    location.pathname.includes(section.href),\n  );\n\n  if (!sidebarSection) {\n    return null;\n  }\n\n  return (\n    <div className=\"vads-l-col--4 site-c-content__nav\">\n      <div className=\"site-c-sidenav\">\n        <SidebarItems items={sidebarSection.items} />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Link, StaticQuery, graphql } from 'gatsby';\n\n/**\n * Finds a specific component inside a list\n *\n * @param {string} componentToMatch\n */\n\nfunction ComponentList({ componentToMatch }) {\n  return (\n    <StaticQuery\n      query={graphql`\n        query ComponentsQuery {\n          components: allSitePage(\n            filter: { context: { source: { eq: \"component\" } } }\n            sort: { fields: [context___name], order: ASC }\n          ) {\n            edges {\n              node {\n                path\n                context {\n                  source\n                  name\n                }\n              }\n            }\n          }\n        }\n      `}\n      render={(data) =>\n        data.components.edges.map((comp) => {\n          return componentToMatch === comp.node.context.name.toLowerCase() ? (\n            <ComponentItem\n              item={{\n                name: comp.node.context.name,\n              }}\n            />\n          ) : (\n            ''\n          );\n        })\n      }\n    />\n  );\n}\n\nfunction ComponentItem({ item }) {\n  const base = `https://github.com/department-of-veterans-affairs/veteran-facing-services-tools/blob/master/packages`;\n  const formationReact = '/formation-react/src/components/';\n  const link = base + formationReact + item.name + '/' + item.name + '.mdx';\n  return <Link to={link}>Edit this page on GitHub</Link>;\n}\n\nexport default function Components({ pathname }) {\n  const splits = pathname.split('/');\n  return <ComponentList componentToMatch={splits[3]} />;\n}\n","import React from 'react';\nimport { Link } from 'gatsby';\n\nimport sidebarData from '../../sidebar';\n\n/**\n * This function will return if the name of the file is index.mdx\n * instead of the default value\n * @param {object} location - Used to obtain the page location\n * @returns {string} - Return either index or empty if not needed\n */\n\nconst getIndexMdx = (location) => {\n  const pathName = getPathName(location);\n\n  const sidebarSection = sidebarData.sections.find((section) =>\n    pathName.includes(section.href),\n  );\n\n  // Test first Level of the sidebar object\n  const level1 = sidebarData.sections.find(\n    (section) => section.href === pathName,\n  );\n\n  if (level1?.indexmdx) {\n    return '/index';\n  }\n\n  // Test second Level of the sidebar object\n  if (sidebarSection?.items) {\n    const level2Sections = sidebarSection.items.map((item) => {\n      return Array.isArray(item.items)\n        ? item.items.find((lvl2Item) => lvl2Item.href === pathName)\n        : null;\n    });\n\n    const level2 = level2Sections.map((section) => {\n      if (section?.href && section.href === pathName) {\n        return section?.indexmdx ? true : false;\n      }\n    });\n\n    if (level2.find((indexmdx) => indexmdx)) {\n      return '/index';\n    }\n  }\n\n  return '';\n};\n\nconst getPathName = (location) => {\n  // Remove extra path in production environment\n  let pathName = location.pathname.replace(\n    '/veteran-facing-services-tools',\n    '',\n  );\n\n  // Check for additional '/' at the end when refreshing the browser\n  if (pathName.length > 0 && pathName.charAt(pathName.length - 1) === '/') {\n    pathName = pathName.substring(0, pathName.length - 1);\n  }\n\n  return pathName;\n};\n\nexport default function Documentation({ location }) {\n  const base = `https://github.com/department-of-veterans-affairs/veteran-facing-services-tools/blob/master/packages`;\n  const documentation = '/documentation/src/pages';\n  const link =\n    base +\n    documentation +\n    getPathName(location) +\n    getIndexMdx(location) +\n    '.mdx';\n\n  return <Link to={link}>Edit this page on GitHub</Link>;\n}\n","import React from 'react';\nimport Components from './Components';\nimport Documentation from './Documentation';\n\nconst getGithubHref = (location) => {\n  if (location.pathname.includes('components')) {\n    const pathName = location.pathname.replace(\n      '/veteran-facing-services-tools',\n      '',\n    );\n    return <Components pathname={pathName} />;\n  } else {\n    return <Documentation location={location} />;\n  }\n};\n\nexport default function PageFooter({ location }) {\n  return (\n    <div>\n      <p>\n        <br />\n        <i class=\"fa fa-edit\" aria-hidden=\"true\"></i> {getGithubHref(location)}\n      </p>\n    </div>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Layout from './Layout';\nimport Sidebar from '../components/sidebar/Sidebar';\nimport PageFooter from '../components/pageFooter/PageFooter';\n\n/**\n * Layout\n *\n * @class Layout\n * @extends {React.Component}\n */\nexport default function SidebarLayout({ children, location }) {\n  return (\n    <Layout location={location}>\n      <div className=\"vads-l-row\">\n        <Sidebar location={location} />\n        <div\n          id=\"main-content\"\n          className=\"vads-l-col--8 site-c-content__content docSearch-content\"\n        >\n          {children}\n          <PageFooter location={location} />\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nSidebarLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/jenkins/workspace/ran-facing-services-tools_master/packages/documentation/src/layouts/SidebarLayout.jsx\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component '\" + name + \"' was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2 {...{\n      \"id\": \"adding-external-pages-from-github-api\"\n    }}>{`Adding External Pages from Github API`}</h2>\n    <p>{`We are going to be using Github's GraphQL API to consume markdown pages from GitHub.\nThis document will detail the process of adding pages and how it all works.`}</p>\n    <h3 {...{\n      \"id\": \"why\"\n    }}>{`Why?`}</h3>\n    <p>{`We wanted a way to get pre-existing documents from GitHub without having to\nduplicate it.`}</p>\n    <h3 {...{\n      \"id\": \"how-to-add-external-pages\"\n    }}>{`How to Add External pages`}</h3>\n    <p>{`I have created a Gatsby plugin called `}<strong parentName=\"p\">{`github-api-pages`}</strong>{` located at `}<strong parentName=\"p\">{`/plugins/github-api-pages`}</strong>{`.\nYou can learn more about creating your own plugin at `}<a parentName=\"p\" {...{\n        \"href\": \"/veteran-facing-services-tools/getting-started/common-tasks/creating-gatsby-plugins\"\n      }}>{`creating-gatsby-plugins`}</a>{`\nAll code that is interfacing with the GitHubAPI is located at `}<strong parentName=\"p\">{`/plugins/github-api-pages/-github-api`}</strong>{`. We should try to\nkeep any code that is interfacing with the GitHubAPI in this file so we have one source of truth.`}</p>\n    <h5 {...{\n      \"id\": \"limitations\"\n    }}>{`Limitations`}</h5>\n    <p>{`Due to GitHub's rate limit we can only grab whole directories or single files at a time.\nIf we try to get the whole repo it will give us a rate limit error. This is also due to the size of our documentation repo.`}</p>\n    <h5 {...{\n      \"id\": \"data-you-will-need-to-make-the-api-request\"\n    }}>{`Data you will need to make the API request`}</h5>\n    <ul>\n      <li parentName=\"ul\">{`Owner of the repo`}</li>\n      <li parentName=\"ul\">{`Repo name`}</li>\n      <li parentName=\"ul\">{`File directory you want to add or file fileName`}</li>\n    </ul>\n    <p>{`Example:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`department-of-veterans-affairs/vets.gov-team/Administrative/Accessing-Staging.md\n|            owner           |     repo    |           file directory           |\n`}</code></pre>\n    <p><strong parentName=\"p\"><em parentName=\"strong\">{`Note`}</em></strong>{`: The file directory is not the url but the actual directory.\nHere is an example of what the file directory should look like:`}</p>\n    <h2 {...{\n      \"id\": \"github-file-directory\"\n    }}>{`github file directory`}</h2>\n    <p><strong parentName=\"p\">{`How to add files:`}</strong>{`\nAfter you have gathered the information (owner, repo, file directory) from github, now you can add the files\ninto Gatsby.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Located in the `}<strong parentName=\"p\">{`/plugins/github-api-pages/`}</strong>{` you should see a `}<strong parentName=\"p\">{`pages`}</strong>{` directory. To add github file locations\nyou need to either add it to a list or create your own list. Here are the steps of how to add your own list.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Add a JSON file named the main directory of your github directory. In this example we will be using `}<strong parentName=\"p\">{`work-practices`}</strong>{`.\nYou can see how we are using the data we gathered earlier (owner, repo, file directory). All you need to do is add your\nfile directory to the `}<strong parentName=\"p\">{`directoryPaths`}</strong>{` array. It can be a directory or just a file location.`}</p>\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-JSON\"\n              }}>{`// /plugins/github-api-pages/pages/work-practices.json\n\n{\n  \"owner\": \"department-of-veterans-affairs\",\n  \"repo\": \"vets.gov-team\",\n  \"directoryPaths\": [\n    \"Work Practices/Accessibility and 508\",\n    \"Work Practices/Accessibility and 508/meeting-notes/2017-06-05-meeting-508-office.md\"\n  ]\n}\n`}</code></pre>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`After you have set up the JSON file, now you have to add it to the list of pages. This is\ndone in the `}<strong parentName=\"p\">{`/plugins/github-api-pages/pages/index.js`}</strong>{` file.`}</p>\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`// /plugins/github-api-pages/pages/index.js\n\nexports.workPractices = require('./work-practices.json');\n`}</code></pre>\n          </li>\n        </ul>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"how-it-works\"\n    }}>{`How it Works`}</h3>\n    <p>{`Initially we were trying to use pre-existing Gatsby plugins to do this but\ncouldn't find one that did what we exactly wanted it to do. The ones that came\ncloses to doing what we wanted ended up timing out due to the massive document repo\nwe have. So we ended up writing our own local plugin. Here is a list of steps we\ntook to make this work.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Use Gatsby's `}<inlineCode parentName=\"li\">{`sourceNodes`}</inlineCode>{` lifecycle hook to get data.`}</li>\n      <li parentName=\"ul\">{`Use GitHub's GraphQL API to query page information from GitHub`}</li>\n      <li parentName=\"ul\">{`Create a Gatsby Node for the pages`}</li>\n      <li parentName=\"ul\">{`Use `}<inlineCode parentName=\"li\">{`gatsby-transformer-remark`}</inlineCode>{` to convert the markdown data into an html document`}</li>\n      <li parentName=\"ul\">{`Create pages using the createPages lifecycle hook.`}</li>\n    </ul>\n    <h4 {...{\n      \"id\": \"use-gatsbys-sourcenodes-lifecycle-hook-to-get-data\"\n    }}>{`Use Gatsby's sourceNodes lifecycle hook to get data.`}</h4>\n    <p>{`First thing we have to do to get data from an API request into Gatsby is hook into the\n`}<inlineCode parentName=\"p\">{`sourceNodes`}</inlineCode>{` lifecycle hook. This is were Gatsby allows you to do this.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`// /plugins/github-api-pages/gatsby-node.js\n\nconst path  = require('path');\nconst githubApi = require('./github-api');\nconst githubPages = require('./pages');\n\nexports.sourceNodes = async ({\n  actions,\n  getNode,\n  hasNodeChanged,\n}) => {\n  const { createNode } = actions\n\n  await githubApi.getPagesAndCreateNodes(githubPages, createNode);\n}\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"use-githubs-graphql-api-to-query-page-information-from-github\"\n    }}>{`Use GitHub's GraphQL API to query page information from GitHub`}</h4>\n    <p>{`Now we have to do a API request using the Github GraphQL API. You can use the `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.github.com/v4/explorer/\"\n      }}>{`GitHub's GraphQL Explorer`}</a>{` to generate your query. You'll have to explore GitHub's GraphQL API to understand more but here is a reference of how to get content data from GitHub.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://platform.github.community/t/query-repo-contents-with-graphql-api/1896\"\n      }}>{`https://platform.github.community/t/query-repo-contents-with-graphql-api/1896`}</a></p>\n    <p>{`Here is an example of what it looks like.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`// gatsby-node.js\n\nconst crypto = require('crypto');\nconst GithubGraphQLApi = require('node-github-graphql');\nconst path = require('path');\n\nconst github = new GithubGraphQLApi({\n  token: process.env.GITHUB_API_KEY,\n});\n\nexports.sourceNodes = async ({\n  boundActionCreators,\n  getNode,\n  hasNodeChanged,\n}) => {\n  const { createNode } = boundActionCreators\n\n  const result = await github.query(\\`\n    {\n      repository(owner: \"department-of-veterans-affairs\" , name: \"vets.gov-team\"){\n        id\n        name\n        object (expression: \"master:Work Practices\"){\n          ... on Tree {\n            entries {\n              oid\n              name\n              object {\n                ... on Tree {\n                  entries {\n                    oid\n                    name\n                    object {\n                      ... on Blob {\n                        text\n                      }\n                    }\n                  }\n                }\n                ... on Blob {\n                  text\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  \\`);\n}\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"create-a-gatsby-node-for-the-pages\"\n    }}>{`Create a Gatsby Node for the pages`}</h4>\n    <p>{`After that we have to create a Node so that Gatsby can add it to the GraphQL data system.\nThere are notes in the below code which shows what is required and what is optional.\nYou may add custom properties that will be available in GraphQL.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`// gatsby-node.js\n\nconst crypto = require('crypto');\nconst GithubGraphQLApi = require('node-github-graphql');\nconst path = require('path');\n\nconst github = new GithubGraphQLApi({\n  token: process.env.GITHUB_API_KEY,\n});\n\nexports.sourceNodes = async ({\n  boundActionCreators,\n  getNode,\n  hasNodeChanged,\n}) => {\n  const { createNode } = boundActionCreators\n\n  const result = await github.query(\\`\n    {\n      repository(owner: \"department-of-veterans-affairs\" , name: \"vets.gov-team\"){\n        id\n        name\n        object (expression: \"master:Work Practices\"){\n          ... on Tree {\n            entries {\n              oid\n              name\n              object {\n                ... on Tree {\n                  entries {\n                    oid\n                    name\n                    object {\n                      ... on Blob {\n                        text\n                      }\n                    }\n                  }\n                }\n                ... on Blob {\n                  text\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  \\`);\n\n  result\n    .data\n    .repository\n    .object\n    .entries.filter(item => item.name.endsWith('.md')).forEach(({ name, oid, object }) => {\n      createNode({\n        id: oid, <---- required\n        parent: null, <---- required\n        children: [], <---- required\n        internal: { <---- required\n          type: 'GithubAPI', <---- define type for look up in GraphQL\n          contentDigest: crypto  <---- required\n            .createHash('md5')\n            .update(object.text)\n            .digest('hex'),\n          mediaType: 'text/markdown', <---- required\n          content: object.text, <---- required\n          directory: dir, <---- custom properties\n          name: name.replace('.md', ''), <---- custom properties\n        }\n      });\n    });\n}\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"use-gatsby-transformer-remark-to-convert-the-markdown-data-into-an-html-document\"\n    }}>{`Use gatsby-transformer-remark to convert the markdown data into an html document`}</h4>\n    <p>{`When we did a `}<strong parentName=\"p\">{`createNode`}</strong>{` we set the `}<strong parentName=\"p\">{`mediaType: 'text/markdown'`}</strong>{`. This will automatically convert the markdown using `}<strong parentName=\"p\">{`gatsby-transformer-remark`}</strong>{`.`}</p>\n    <h3 {...{\n      \"id\": \"create-pages-using-the-createpages-lifecycle-hook\"\n    }}>{`Create pages using the createPages lifecycle hook`}</h3>\n    <p>{`After everything is set and we have all our pages in GraphQL. We can now create pages using our new data. Here is an example.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`// gatsby-node.js\n\nresult.data.allMarkDown.edges.forEach(async ({ node }) => {\n  createPage({\n    path: \\`/\\${node.fields.slug.toLowerCase().replace(/ /g, '-')}/\\`,\n    component: path.resolve('./src/layouts/external-layout.js'),\n    context: {\n      id: node.id,\n      name: node.fields.slug,\n    },\n  })\n})\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}
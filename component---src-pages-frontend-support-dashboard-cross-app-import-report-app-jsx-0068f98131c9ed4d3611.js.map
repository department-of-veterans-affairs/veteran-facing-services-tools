{"version":3,"sources":["webpack:///./src/pages/frontend-support-dashboard/cross-app-import-report/app.jsx","webpack:///./node_modules/@department-of-veterans-affairs/component-library/Table.js"],"names":["getAppImportData","importGraph","Object","keys","map","appName","appImports","platformImports","_toConsumableArray","Set","platformFilesThatImportFromThisApp","file","split","importingFromApp","concat","appsToTest","slice","join","appImportingFrom","appsThatThisAppImportsFrom","isIsolated","icon","React","createElement","className","aria-label","aria-hidden","crossAppImportFields","label","value","App","_ref","location","_useState","useState","crossAppImportData","setCrossAppImportData","useEffect","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","crossAppImports","wrap","_context","prev","next","crossAppImportDataFetch","vetsWebsiteInfo","sent","stop","apply","arguments","processImports","appImportData","totalAppCount","appsIsolated","stats","length","filter","app","percentIsolated","toFixed","Layout","Sidebar","id","Table","data","fields","defineProperty","exports","_react","_interopRequireDefault","_classnames","obj","__esModule","borderClasses","_default","props","currentSort","ariaLabelledBy","role","field","nonSortable","key","scope","fa","order","item","rowIndex","index","alignLeft","alignRight"],"mappings":"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","file":"component---src-pages-frontend-support-dashboard-cross-app-import-report-app-jsx-0068f98131c9ed4d3611.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Table from '@department-of-veterans-affairs/component-library/Table';\nimport Layout from '../../../layouts/Layout';\nimport Sidebar from '../../../components/sidebar/Sidebar';\nimport { crossAppImportDataFetch } from '../../../components/dashboard/DashboardDataFetch';\nimport { vetsWebsiteInfo } from '../../../components/dashboard/definitions/constants';\n\n/**\n * Gets a check or 'x' icon based on the given status.\n *\n * @param {boolean} status - Determines whether to return check or x icon.\n * @returns {JSX.Element} Status icon.\n */\nconst getStatusIcon = status => {\n  const trueIcon = (\n    <span className=\"dash-true-icon\" aria-label=\"True Icon\">\n      <i className=\"fas fa-check-circle fa-2x\" aria-hidden=\"true\" />\n    </span>\n  );\n  const falseIcon = (\n    <span className=\"dash-false-icon\" aria-label=\"False Icon\">\n      <i className=\"fas fa-times-circle fa-2x\" aria-hidden=\"true\" />\n    </span>\n  );\n\n  return status ? trueIcon : falseIcon;\n};\n\n/**\n * Transforms import graph data for table.\n *\n * @param {Object} importGraph - Cross app import graph.\n * @returns {Object[]} Transformed import graph data.\n */\nconst getAppImportData = importGraph => {\n  return Object.keys(importGraph).map(appName => {\n    const appImports = importGraph[appName];\n\n    // Platform directory paths with files that import from the app.\n    const platformImports = [\n      ...new Set(\n        appImports.platformFilesThatImportFromThisApp.map(\n          file => `platform/${file.split('/')[2]}`,\n        ),\n      ),\n    ];\n\n    // Apps in 'appsToTest' let us know which apps import from the app in question.\n    // The app itself is always first in 'appsToTest', so we need to remove it.\n    const importingFromApp =\n      [...appImports.appsToTest.slice(1), ...platformImports].join(', ') ||\n      null;\n\n    // Apps that the app in question is importing from.\n    const appImportingFrom =\n      Object.keys(appImports.appsThatThisAppImportsFrom).join(', ') || null;\n\n    const isIsolated = !importingFromApp && !appImportingFrom;\n    const icon = getStatusIcon(isIsolated);\n\n    return { appName, importingFromApp, appImportingFrom, icon, isIsolated };\n  });\n};\n\n/**\n * Gets statistics of isolated apps from the given import data.\n *\n * @param {Object[]} appImportData - Transformed app import data.\n * @returns {Object} Object with stats on isolated apps.\n */\nconst getIsolationStats = appImportData => {\n  const totalAppCount = appImportData.length;\n  const appsIsolated = appImportData.filter(app => app.isIsolated).length;\n\n  const percentIsolated = ((appsIsolated / totalAppCount) * 100).toFixed(2);\n\n  return { appsIsolated, totalAppCount, percentIsolated };\n};\n\nconst crossAppImportFields = [\n  { label: 'Application', value: 'appName' },\n  { label: 'Places importing from application', value: 'importingFromApp' },\n  { label: 'Places application imports from', value: 'appImportingFrom' },\n  { label: 'Isolated', value: 'icon' },\n];\n\nconst App = ({ location }) => {\n  const [crossAppImportData, setCrossAppImportData] = useState([]);\n\n  useEffect(() => {\n    const processImports = async () => {\n      const importGraph = await crossAppImportDataFetch(vetsWebsiteInfo);\n      const crossAppImports = getAppImportData(importGraph);\n\n      setCrossAppImportData(crossAppImports);\n    };\n\n    processImports();\n  }, []);\n\n  const stats = getIsolationStats(crossAppImportData);\n\n  return (\n    <Layout location={location}>\n      <div className=\"vads-l-row site-l-wrapper\">\n        <Sidebar location={location} />\n        <div\n          id=\"main-content-coverage\"\n          className=\"dash-coverage-table site-c-content__content docSearch-content vads-l-col--12\"\n        >\n          <h1>Frontend Support Dashboard</h1>\n          <h2>Cross App Import Report</h2>\n          <p>\n            <strong>\n              {stats.appsIsolated} out of {stats.totalAppCount} (\n              {stats.percentIsolated} %) application directories are isolated\n            </strong>\n          </p>\n\n          <Table data={crossAppImportData} fields={crossAppImportFields} />\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default App;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nvar borderClasses = 'vads-u-border-top--0 vads-u-border-right--0 vads-u-border-left--0 vads-u-font-family--sans vads-u-padding--0 vads-u-padding-y--0p5 medium-screen:vads-u-padding--2';\nvar rowPaddingClass = 'vads-u-padding-y--2';\nfunction Table(props) {\n  var currentSort = props.currentSort,\n    fields = props.fields,\n    data = props.data,\n    ariaLabelledBy = props.ariaLabelledBy;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"table\", {\n    \"aria-labelledby\": ariaLabelledBy,\n    className: \"responsive\",\n    role: \"table\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"thead\", null, /*#__PURE__*/_react[\"default\"].createElement(\"tr\", {\n    role: \"row\"\n  }, fields.map(function (field) {\n    return field.nonSortable ? /*#__PURE__*/_react[\"default\"].createElement(\"th\", {\n      key: field.value\n    }, field.label) : /*#__PURE__*/_react[\"default\"].createElement(\"th\", {\n      key: field.value,\n      className: borderClasses,\n      role: \"columnheader\",\n      scope: \"col\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"button\", {\n      className: \"va-button-link vads-u-font-weight--bold vads-u-color--base vads-u-text-decoration--none\"\n    }, field.label, (currentSort === null || currentSort === void 0 ? void 0 : currentSort.value) === field.value && /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      className: (0, _classnames[\"default\"])({\n        fa: true,\n        'fas fa-caret-down': currentSort.order === 'DESC',\n        'fas fa-caret-up': currentSort.order === 'ASC'\n      })\n    })));\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, data.map(function (item, rowIndex) {\n    return /*#__PURE__*/_react[\"default\"].createElement(\"tr\", {\n      key: rowIndex,\n      className: \"\".concat(borderClasses, \" \").concat(rowPaddingClass),\n      role: \"row\"\n    }, fields.map(function (field, index) {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n        \"data-index\": index,\n        className: (0, _classnames[\"default\"])(borderClasses, {\n          'vads-u-text-align--left': field.alignLeft,\n          'medium-screen:vads-u-text-align--right': field.alignRight\n        }),\n        \"data-label\": field.label,\n        key: \"\".concat(rowIndex, \"-\").concat(field.label),\n        role: \"cell\"\n      }, item[field.value] === null ? '---' : item[field.value]);\n    }));\n  })));\n}\nvar _default = Table;\nexports[\"default\"] = _default;"],"sourceRoot":""}
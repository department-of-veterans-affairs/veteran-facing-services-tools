(window.webpackJsonp=window.webpackJsonp||[]).push([[39,50],{"1nT/":function(e){e.exports=JSON.parse('{"data":{"components":{"edges":[{"node":{"path":"/visual-design/components/accepttermsprompt/","context":{"source":"component","name":"AcceptTermsPrompt"}}},{"node":{"path":"/visual-design/components/additionalinfo/","context":{"source":"component","name":"AdditionalInfo"}}},{"node":{"path":"/visual-design/components/alertbox/","context":{"source":"component","name":"AlertBox"}}},{"node":{"path":"/visual-design/components/breadcrumbs/","context":{"source":"component","name":"Breadcrumbs"}}},{"node":{"path":"/visual-design/components/collapsiblepanel/","context":{"source":"component","name":"CollapsiblePanel"}}},{"node":{"path":"/visual-design/components/dropdownpanel/","context":{"source":"component","name":"DropDownPanel"}}},{"node":{"path":"/visual-design/components/errorablecheckbox/","context":{"source":"component","name":"ErrorableCheckbox"}}},{"node":{"path":"/visual-design/components/errorablecheckboxgroup/","context":{"source":"component","name":"ErrorableCheckboxGroup"}}},{"node":{"path":"/visual-design/components/errorabledate/","context":{"source":"component","name":"ErrorableDate"}}},{"node":{"path":"/visual-design/components/errorablefileinput/","context":{"source":"component","name":"ErrorableFileInput"}}},{"node":{"path":"/visual-design/components/errorablemonthyear/","context":{"source":"component","name":"ErrorableMonthYear"}}},{"node":{"path":"/visual-design/components/errorablenumberinput/","context":{"source":"component","name":"ErrorableNumberInput"}}},{"node":{"path":"/visual-design/components/errorableradiobuttons/","context":{"source":"component","name":"ErrorableRadioButtons"}}},{"node":{"path":"/visual-design/components/errorableselect/","context":{"source":"component","name":"ErrorableSelect"}}},{"node":{"path":"/visual-design/components/errorabletextarea/","context":{"source":"component","name":"ErrorableTextArea"}}},{"node":{"path":"/visual-design/components/errorabletextinput/","context":{"source":"component","name":"ErrorableTextInput"}}},{"node":{"path":"/visual-design/components/expandinggroup/","context":{"source":"component","name":"ExpandingGroup"}}},{"node":{"path":"/visual-design/components/helpmenu/","context":{"source":"component","name":"HelpMenu"}}},{"node":{"path":"/visual-design/components/iconbase/","context":{"source":"component","name":"IconBase"}}},{"node":{"path":"/visual-design/components/iconhelp/","context":{"source":"component","name":"IconHelp"}}},{"node":{"path":"/visual-design/components/iconsearch/","context":{"source":"component","name":"IconSearch"}}},{"node":{"path":"/visual-design/components/iconuser/","context":{"source":"component","name":"IconUser"}}},{"node":{"path":"/visual-design/components/loadingindicator/","context":{"source":"component","name":"LoadingIndicator"}}},{"node":{"path":"/visual-design/components/megamenu/","context":{"source":"component","name":"MegaMenu"}}},{"node":{"path":"/visual-design/components/modal/","context":{"source":"component","name":"Modal"}}},{"node":{"path":"/visual-design/components/ombinfo/","context":{"source":"component","name":"OMBInfo"}}},{"node":{"path":"/visual-design/components/pagination/","context":{"source":"component","name":"Pagination"}}},{"node":{"path":"/visual-design/components/privacyagreement/","context":{"source":"component","name":"PrivacyAgreement"}}},{"node":{"path":"/visual-design/components/progressbar/","context":{"source":"component","name":"ProgressBar"}}},{"node":{"path":"/visual-design/components/progressbutton/","context":{"source":"component","name":"ProgressButton"}}},{"node":{"path":"/visual-design/components/promobanner/","context":{"source":"component","name":"PromoBanner"}}},{"node":{"path":"/visual-design/components/searchmenu/","context":{"source":"component","name":"SearchMenu"}}},{"node":{"path":"/visual-design/components/segmentedprogressbar/","context":{"source":"component","name":"SegmentedProgressBar"}}},{"node":{"path":"/visual-design/components/sortabletable/","context":{"source":"component","name":"SortableTable"}}},{"node":{"path":"/visual-design/components/systemdownview/","context":{"source":"component","name":"SystemDownView"}}},{"node":{"path":"/visual-design/components/telephone/","context":{"source":"component","name":"Telephone"}}}]}}}')},"3dLD":function(e,n,t){"use strict";t.d(n,"a",(function(){return N}));var a=t("q1tI"),o=t.n(a),r=t("8FPV"),c=t("1nT/"),s=t("Wbzz");function m(){return o.a.createElement(s.StaticQuery,{query:"4277382034",render:function(e){return o.a.createElement(l,{items:e.components.edges.map((function(e){return{href:e.node.path,name:e.node.context.name}}))})},data:c})}function i(e){var n=e.item;return n.href?o.a.createElement("li",{key:n.name},o.a.createElement(s.Link,{to:n.href},n.name)):o.a.createElement("li",{key:n.name},n.name," (future)")}function l(e){var n=e.items,t=e.isSublist,a=void 0!==t&&t;return n.length?o.a.createElement("ul",{className:"site-c-sidenav-list"},n.map((function(e){return e.items?o.a.createElement("li",{key:e.name},a&&o.a.createElement(i,{item:e}),!a&&o.a.createElement("h2",{className:"heading-level-4"},e.name),o.a.createElement(l,{isSublist:!0,items:e.items})):"componentList"===e.query?o.a.createElement("li",{key:e.name},a&&o.a.createElement(i,{item:e}),!a&&o.a.createElement("h2",{className:"heading-level-4"},e.name),o.a.createElement(m,null)):o.a.createElement(i,{item:e,key:e.name})}))):null}var d=t("MEl4"),p=t.n(d);function u(e){var n=e.location,t=p.a.sections.find((function(e){return n.pathname.includes(e.href)}));return t?o.a.createElement("div",{className:"vads-l-col--4 site-c-content__nav"},o.a.createElement("div",{className:"site-c-sidenav"},o.a.createElement(l,{items:t.items}))):null}var b=t("Z/Vb");function g(e){var n=e.componentToMatch;return o.a.createElement(s.StaticQuery,{query:"4193446859",render:function(e){return e.components.edges.map((function(e){return n===e.node.context.name.toLowerCase()?o.a.createElement(x,{item:{name:e.node.context.name}}):""}))},data:b})}function x(e){var n=e.item,t="https://github.com/department-of-veterans-affairs/veteran-facing-services-tools/blob/master/packages/formation-react/src/components/"+n.name+"/"+n.name+".mdx";return o.a.createElement(s.Link,{to:t},"Edit this page on GitHub")}function h(e){var n=e.pathname.split("/");return o.a.createElement(g,{componentToMatch:n[3]})}var v=function(e){var n=e.pathname.replace("/veteran-facing-services-tools","");return n.length>0&&"/"===n.charAt(n.length-1)&&(n=n.substring(0,n.length-1)),n};function O(e){var n=e.location,t="https://github.com/department-of-veterans-affairs/veteran-facing-services-tools/blob/master/packages/documentation/src/pages"+v(n)+function(e){var n=v(e),t=p.a.sections.find((function(e){return n.includes(e.href)})),a=p.a.sections.find((function(e){return e.href===n}));if(null==a?void 0:a.indexmdx)return"/index";if((null==t?void 0:t.items)&&t.items.map((function(e){return Array.isArray(e.items)?e.items.find((function(e){return e.href===n})):null})).map((function(e){if((null==e?void 0:e.href)&&e.href===n)return!!(null==e?void 0:e.indexmdx)})).find((function(e){return e})))return"/index";return""}(n)+".mdx";return o.a.createElement(s.Link,{to:t},"Edit this page on GitHub")}function j(e){var n=e.location;return o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("br",null),o.a.createElement("i",{class:"fa fa-edit","aria-hidden":"true"})," ",function(e){if(e.pathname.includes("components")){var n=e.pathname.replace("/veteran-facing-services-tools","");return o.a.createElement(h,{pathname:n})}return o.a.createElement(O,{location:e})}(n)))}function N(e){var n=e.children,t=e.location;return o.a.createElement(r.a,{location:t},o.a.createElement("div",{className:"vads-l-row"},o.a.createElement(u,{location:t}),o.a.createElement("div",{id:"main-content",className:"vads-l-col--8 site-c-content__content docSearch-content"},n,o.a.createElement(j,{location:t}))))}},"Z/Vb":function(e){e.exports=JSON.parse('{"data":{"components":{"edges":[{"node":{"path":"/visual-design/components/accepttermsprompt/","context":{"source":"component","name":"AcceptTermsPrompt"}}},{"node":{"path":"/visual-design/components/additionalinfo/","context":{"source":"component","name":"AdditionalInfo"}}},{"node":{"path":"/visual-design/components/alertbox/","context":{"source":"component","name":"AlertBox"}}},{"node":{"path":"/visual-design/components/breadcrumbs/","context":{"source":"component","name":"Breadcrumbs"}}},{"node":{"path":"/visual-design/components/collapsiblepanel/","context":{"source":"component","name":"CollapsiblePanel"}}},{"node":{"path":"/visual-design/components/dropdownpanel/","context":{"source":"component","name":"DropDownPanel"}}},{"node":{"path":"/visual-design/components/errorablecheckbox/","context":{"source":"component","name":"ErrorableCheckbox"}}},{"node":{"path":"/visual-design/components/errorablecheckboxgroup/","context":{"source":"component","name":"ErrorableCheckboxGroup"}}},{"node":{"path":"/visual-design/components/errorabledate/","context":{"source":"component","name":"ErrorableDate"}}},{"node":{"path":"/visual-design/components/errorablefileinput/","context":{"source":"component","name":"ErrorableFileInput"}}},{"node":{"path":"/visual-design/components/errorablemonthyear/","context":{"source":"component","name":"ErrorableMonthYear"}}},{"node":{"path":"/visual-design/components/errorablenumberinput/","context":{"source":"component","name":"ErrorableNumberInput"}}},{"node":{"path":"/visual-design/components/errorableradiobuttons/","context":{"source":"component","name":"ErrorableRadioButtons"}}},{"node":{"path":"/visual-design/components/errorableselect/","context":{"source":"component","name":"ErrorableSelect"}}},{"node":{"path":"/visual-design/components/errorabletextarea/","context":{"source":"component","name":"ErrorableTextArea"}}},{"node":{"path":"/visual-design/components/errorabletextinput/","context":{"source":"component","name":"ErrorableTextInput"}}},{"node":{"path":"/visual-design/components/expandinggroup/","context":{"source":"component","name":"ExpandingGroup"}}},{"node":{"path":"/visual-design/components/helpmenu/","context":{"source":"component","name":"HelpMenu"}}},{"node":{"path":"/visual-design/components/iconbase/","context":{"source":"component","name":"IconBase"}}},{"node":{"path":"/visual-design/components/iconhelp/","context":{"source":"component","name":"IconHelp"}}},{"node":{"path":"/visual-design/components/iconsearch/","context":{"source":"component","name":"IconSearch"}}},{"node":{"path":"/visual-design/components/iconuser/","context":{"source":"component","name":"IconUser"}}},{"node":{"path":"/visual-design/components/loadingindicator/","context":{"source":"component","name":"LoadingIndicator"}}},{"node":{"path":"/visual-design/components/megamenu/","context":{"source":"component","name":"MegaMenu"}}},{"node":{"path":"/visual-design/components/modal/","context":{"source":"component","name":"Modal"}}},{"node":{"path":"/visual-design/components/ombinfo/","context":{"source":"component","name":"OMBInfo"}}},{"node":{"path":"/visual-design/components/pagination/","context":{"source":"component","name":"Pagination"}}},{"node":{"path":"/visual-design/components/privacyagreement/","context":{"source":"component","name":"PrivacyAgreement"}}},{"node":{"path":"/visual-design/components/progressbar/","context":{"source":"component","name":"ProgressBar"}}},{"node":{"path":"/visual-design/components/progressbutton/","context":{"source":"component","name":"ProgressButton"}}},{"node":{"path":"/visual-design/components/promobanner/","context":{"source":"component","name":"PromoBanner"}}},{"node":{"path":"/visual-design/components/searchmenu/","context":{"source":"component","name":"SearchMenu"}}},{"node":{"path":"/visual-design/components/segmentedprogressbar/","context":{"source":"component","name":"SegmentedProgressBar"}}},{"node":{"path":"/visual-design/components/sortabletable/","context":{"source":"component","name":"SortableTable"}}},{"node":{"path":"/visual-design/components/systemdownview/","context":{"source":"component","name":"SystemDownView"}}},{"node":{"path":"/visual-design/components/telephone/","context":{"source":"component","name":"Telephone"}}}]}}}')},bAeu:function(e,n,t){"use strict";t.r(n),t.d(n,"_frontmatter",(function(){return c})),t.d(n,"default",(function(){return i}));var a=t("zLVn"),o=(t("q1tI"),t("7ljp")),r=t("3dLD"),c={},s={_frontmatter:c},m=r.a;function i(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(o.mdx)(m,Object.assign({},s,t,{components:n,mdxType:"MDXLayout"}),Object(o.mdx)("h1",{id:"run-and-build-vagov"},"Run and build VA.gov"),Object(o.mdx)("h2",{id:"prerequisite"},"Prerequisite"),Object(o.mdx)("ul",null,Object(o.mdx)("li",{parentName:"ul"},"Complete the ",Object(o.mdx)("a",Object.assign({parentName:"li"},{href:"/veteran-facing-services-tools/getting-started"}),"first")," step in ",Object(o.mdx)("em",{parentName:"li"},"Start up guide"),".")),Object(o.mdx)("h2",{id:"locally-run-vagov"},"Locally run VA.gov"),Object(o.mdx)("p",null,"Start the watch task:"),Object(o.mdx)("pre",null,Object(o.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"yarn watch\n")),Object(o.mdx)("h3",{id:"build"},"Build"),Object(o.mdx)("ul",null,Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("strong",{parentName:"li"},"Metalsmith")," manages this build pipeline. At a high level, this process:",Object(o.mdx)("ol",{parentName:"li"},Object(o.mdx)("li",{parentName:"ol"},"retrieves and ",Object(o.mdx)("strong",{parentName:"li"},"builds")," all of the ",Object(o.mdx)("strong",{parentName:"li"},"static pages")," sourced from ",Object(o.mdx)("inlineCode",{parentName:"li"},"vagov-content")," or Drupal"),Object(o.mdx)("li",{parentName:"ol"},"starts ",Object(o.mdx)("strong",{parentName:"li"},"Webpack"),"'s devevelopment server which",Object(o.mdx)("ul",{parentName:"li"},Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("strong",{parentName:"li"},"builds")," the ",Object(o.mdx)("strong",{parentName:"li"},"JavaScript")," and ",Object(o.mdx)("strong",{parentName:"li"},"CSS")," bundles, and"),Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("strong",{parentName:"li"},"serves")," the ",Object(o.mdx)("strong",{parentName:"li"},"JavaScript")," and ",Object(o.mdx)("strong",{parentName:"li"},"CSS")," bundles and the ",Object(o.mdx)("strong",{parentName:"li"},"static content")," built by Metalsmith at ",Object(o.mdx)("a",Object.assign({parentName:"li"},{href:"http://localhost:3000"}),"http://localhost:3000"))))))),Object(o.mdx)("h3",{id:"output"},"Output"),Object(o.mdx)("ul",null,Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("strong",{parentName:"li"},"Metalsmith")," outputs ",Object(o.mdx)("strong",{parentName:"li"},"static pages")," to",Object(o.mdx)("inlineCode",{parentName:"li"},"build/localhost")),Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("strong",{parentName:"li"},"Webpack")," development server has ",Object(o.mdx)("strong",{parentName:"li"},"no output"),". ",Object(o.mdx)("strong",{parentName:"li"},"JavaScript")," and ",Object(o.mdx)("strong",{parentName:"li"},"CSS")," are kept in memory.")),Object(o.mdx)("h3",{id:"watch-and-rebuild"},"Watch and rebuild"),Object(o.mdx)("ul",null,Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("strong",{parentName:"li"},"Metalsmith")," will rebuild ",Object(o.mdx)("strong",{parentName:"li"},"static pages")," when changes are saved to ",Object(o.mdx)("strong",{parentName:"li"},"templates")," or content in ",Object(o.mdx)("inlineCode",{parentName:"li"},"vagov-content")),Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("strong",{parentName:"li"},"Webpack")," development server will rebuild when changes are saved to ",Object(o.mdx)("strong",{parentName:"li"},"JavaScript")," or ",Object(o.mdx)("strong",{parentName:"li"},"SCSS")),Object(o.mdx)("li",{parentName:"ul"},"Both updates require a browser refresh to see changes."),Object(o.mdx)("li",{parentName:"ul"},"Changes to build process or configuration files are typically not picked up, and require a restart of the watch task to become active.")),Object(o.mdx)("h2",{id:"locally-build-and-run-for-specific-environment"},"Locally build and run for specific environment"),Object(o.mdx)("p",null,Object(o.mdx)("em",{parentName:"p"},"Note: most of the time, it's better to use the ",Object(o.mdx)("inlineCode",{parentName:"em"},"watch")," task to build the site locally since it is the most developer-friendly experience.")),Object(o.mdx)("table",null,Object(o.mdx)("thead",{parentName:"table"},Object(o.mdx)("tr",{parentName:"thead"},Object(o.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"Environment"),Object(o.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"Build Command"),Object(o.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"Output directory"),Object(o.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"Run Command"))),Object(o.mdx)("tbody",{parentName:"table"},Object(o.mdx)("tr",{parentName:"tbody"},Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"localhost"),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"yarn build")),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"build/localhost")),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"npx http-server -p 3001 build/localhost"))),Object(o.mdx)("tr",{parentName:"tbody"},Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"dev.va.gov"),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"yarn build --buildtype=vagovdev")),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"build/vagovdev")),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"npx http-server -p 3001 build/vagovdev"))),Object(o.mdx)("tr",{parentName:"tbody"},Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"staging.va.gov"),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"NODE_ENV=production yarn build --buildtype=vagovstaging")),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"build/vagovstaging")),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"npx http-server -p 3001 build/vagovstaging"))),Object(o.mdx)("tr",{parentName:"tbody"},Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("a",Object.assign({parentName:"td"},{href:"http://www.va.gov"}),"www.va.gov")),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"NODE_ENV=production yarn build --buildtype=vagovprod")),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"build/vagovprod")),Object(o.mdx)("td",Object.assign({parentName:"tr"},{align:null}),Object(o.mdx)("inlineCode",{parentName:"td"},"npx http-server -p 3001 build/vagovprod"))))),Object(o.mdx)("h3",{id:"build-commands"},"Build commands"),Object(o.mdx)("ul",null,Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("strong",{parentName:"li"},"create")," the ",Object(o.mdx)("strong",{parentName:"li"},"static pages")," from the markdown content in the ",Object(o.mdx)("inlineCode",{parentName:"li"},"vagov-content")," repository and data queried from the Drupal API into their ",Object(o.mdx)("strong",{parentName:"li"},"output directory")),Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("strong",{parentName:"li"},"create")," the ",Object(o.mdx)("strong",{parentName:"li"},"JavaScript")," and ",Object(o.mdx)("strong",{parentName:"li"},"CSS")," files with Webpack into ",Object(o.mdx)("inlineCode",{parentName:"li"},"/generated")," folder in their ",Object(o.mdx)("strong",{parentName:"li"},"output directory")," with Webpack")),Object(o.mdx)("p",null,Object(o.mdx)("em",{parentName:"p"},"Production like builds are required for staging and production environments. ",Object(o.mdx)("strong",{parentName:"em"},"NODE_ENV=production")," environment variable is required to be set when running these build commands")),Object(o.mdx)("h3",{id:"run-commands"},"Run commands"),Object(o.mdx)("ul",null,Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("strong",{parentName:"li"},"start")," an ",Object(o.mdx)("inlineCode",{parentName:"li"},"http-server")," that ",Object(o.mdx)("strong",{parentName:"li"},"serves")," the ",Object(o.mdx)("strong",{parentName:"li"},"static pages")," from the ",Object(o.mdx)("strong",{parentName:"li"},"output directory")," at ",Object(o.mdx)("a",Object.assign({parentName:"li"},{href:"https://localhost:3001"}),"http://localhost:3001"))),Object(o.mdx)("p",null,Object(o.mdx)("em",{parentName:"p"},"Typically, the reason for building the site locally like this is to build it in production mode and check that it is behaving as you'd expect.")),Object(o.mdx)("p",null,Object(o.mdx)("em",{parentName:"p"},Object(o.mdx)("strong",{parentName:"em"},"Deep-linking")," to urls that are rendered by ",Object(o.mdx)("strong",{parentName:"em"},"React")," apps on VA.gov ",Object(o.mdx)("strong",{parentName:"em"},"will not work")," when you run the site this way, as that relies on some server-side routing that is handled in nginx (or the Webpack dev server when running the ",Object(o.mdx)("inlineCode",{parentName:"em"},"watch")," task)")),Object(o.mdx)("h2",{id:"related-source"},"Related source"),Object(o.mdx)("ul",null,Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/devops"}),"Metalsmith build script")),Object(o.mdx)("li",{parentName:"ul"},Object(o.mdx)("a",Object.assign({parentName:"li"},{href:"https://github.com/department-of-veterans-affairs/vets-website/blob/master/config/webpack.dev.config.js"}),"Webpack development server config"))))}i.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-getting-started-common-tasks-run-build-mdx-b4a7fba209ef061a0bc4.js.map
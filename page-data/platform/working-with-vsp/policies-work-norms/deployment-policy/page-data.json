{"componentChunkName":"component---src-templates-page-js","path":"/platform/working-with-vsp/policies-work-norms/deployment-policy","result":{"pageContext":{"html":"<p><em>Last updated 2020-01-27</em></p>\n<h1>Automated Deploys</h1>\n<p>There are automated deploys of <code>vets-api</code> and <code>vets-website</code> Monday through Friday. The release is created from <code>master</code> at 2 pm Eastern and deployed at 3 pm Eastern. Code merged to <code>master</code> after 2 pm Eastern will not be added to a release and deployed until the next business day.</p>\n<h2>Exceptions to automated deploys</h2>\n<p>If there are days or periods of time when many people will be out of the office (i.e. holidays) the automated deploys will be suspended. If people aren’t in the office to support the code going out, it’s not responsible to release.</p>\n<p><strong>Note</strong>: This only applies to <em>automated</em> deploys. Engineer-initiated deploys (e.g. to address a critical bug) will be allowed to proceed as usual.</p>\n<h3>Holiday release freeze schedule</h3>\n<p>During holiday release freezes:</p>\n<ul>\n<li>Automated deploys will not occur</li>\n<li>All code deploys require approval via the \"Requesting out-of-band-deploys\" process below</li>\n<li>Content-only deploys may continue without explicit approval, but need to be manually triggered</li>\n<li>Limited support will be available from VSP team.</li>\n</ul>\n<p><em>There may be a change in this policy as VA dictates.</em></p>\n<p>The holiday release freeze is in effect during the following dates:</p>\n<h4>2020</h4>\n<ul>\n<li>05/25 - <strong>Memorial Day</strong></li>\n<li>07/03 - <strong>Independence Day</strong> (observed)</li>\n<li>09/07 - <strong>Labor Day</strong></li>\n<li>11/11 - <strong>Veteran's Day</strong></li>\n<li>11/25 - 11/27 - <strong>Thanksgiving</strong></li>\n<li>12/23 - 1/1/2020 - <strong>Winter holiday freeze</strong> (note: <em>eight business days</em>)</li>\n</ul>\n<h1>Requesting out-of-band deploys</h1>\n<p>If there is a <em>critical issue</em> that needs to be resolved outside the automated deployment schedule, explicit permission must be granted for an out-of-band deploy.</p>\n<p>For every out-of-band deploy requested, VSP team will expect a follow-up <a href=\"https://github.com/department-of-veterans-affairs/va.gov-team-sensitive/tree/master/Postmortems\">postmortem</a> from the requesting team, explaining the context that led to the problem and proposing follow-up actions to prevent similar future problems.</p>\n<h2>Is my issue critical?</h2>\n<p>Examples of <em>critical issues</em> include:</p>\n<ul>\n<li>A bug that’s preventing a significant number of Veterans from accessing a feature</li>\n<li>A bug creating a non-trivial deviation from expected functionality</li>\n<li>A 508/accessibility failure of severity level <strong>0</strong> (<em>Showstopper</em>) or <strong>1</strong> (<em>Critical</em>) (<a href=\"https://github.com/department-of-veterans-affairs/va.gov-team/blob/master/platform/accessibility/guidance/defect-severity-rubric.md\">severity rubric</a>)</li>\n</ul>\n<p>Examples of <em>non-critical issues</em> include:</p>\n<ul>\n<li>Incorrect text or visual formatting that does not impede the feature from working</li>\n<li>Any code for features not yet released to Veterans</li>\n<li>Just wanting to get code out sooner</li>\n</ul>\n<p>When in doubt on whether an issue is <em>critical</em> enough for out-of-band deployment, DEPO leadership for VSP will make the deciding call.</p>\n<h2>Step-by-step process for out-of-band deployment approval</h2>\n<ol>\n<li>You must reach out to VSP DEPO leadership (currently, Kevin Hoffman or Dror Matalon) who will escalate this request to Chris Johnston for approval.</li>\n<li>Once approved, contact the <a href=\"https://dsva.pagerduty.com/schedules#PGIEA8Q\">VSP DevOps oncall</a> through the <a href=\"https://dsva.slack.com/archives/C30LCU8S3\">#oncall channel</a> to coordinate the release.</li>\n<li>Within two business days of this incident, send a PR with a <a href=\"https://github.com/department-of-veterans-affairs/va.gov-team-sensitive/tree/master/Postmortems\">postmortem</a>, including any relevant stakeholders, VSP DEPO leadership, and any VSP team members involved in resolving the incident as reviewers.</li>\n</ol>\n<h2>Step-by-step process for deployment</h2>\n<ol>\n<li>To deploy this change to production, the release job is run with the git SHA for the commit to deploy.</li>\n<li>The auto-deploy boolean flag must be set to <code>FALSE</code> on the job.</li>\n<li>The release tag is captured and then used as input for the matching deploy job.</li>\n<li>There are \"special\" jobs for <code>vets-website</code> and <code>vets-api</code> which will run both the release and deploy of <code>master</code> in one operation.</li>\n</ol>\n<h1>Rails database migrations</h1>\n<p>If a Rails database migration is needed for your code to work successfully, that is handled through a separate process:</p>\n<ol>\n<li>Wait for the Jenkins Slack bot to post an <code>Unapplied database migrations</code> notification in <code>#devops-deploys</code>.</li>\n<li>Once the notification has posted, log a request to the DevOps team in the <code>#vetsgov-devops</code> Slack channel, asking them to inspect the changes and run the post-deploy job.</li>\n</ol>","sourceUrl":"https://github.com/department-of-veterans-affairs/va.gov-team/blob/master/platform/working-with-vsp/policies-work-norms/deployment-policy.md","title":"Automated Deploys"}}}
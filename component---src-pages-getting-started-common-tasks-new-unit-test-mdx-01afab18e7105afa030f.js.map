{"version":3,"sources":["webpack:///./src/components/sidebar/SidebarItems.jsx","webpack:///./src/components/sidebar/Sidebar.js","webpack:///./src/components/EditLink.jsx","webpack:///./src/layouts/SidebarLayout.jsx","webpack:///./src/pages/getting-started/common-tasks/new-unit-test.mdx"],"names":["ComponentList","query","render","data","SidebarItems","items","components","edges","map","comp","href","node","path","name","context","SidebarItem","item","key","to","isSublist","length","className","Sidebar","location","sidebarSection","sidebarData","sections","find","section","pathname","includes","EditLink","sourceUrl","class","aria-hidden","SidebarLayout","children","pageContext","Layout","id","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-getting-started-common-tasks-new-unit-test-mdx-01afab18e7105afa030f.js","sourcesContent":["import React from 'react';\nimport { Link, StaticQuery, graphql } from 'gatsby';\n\n/**\n * Sidebar\n *\n * @param {props} props\n */\n\nfunction ComponentList() {\n  return (\n    <StaticQuery\n      query={graphql`\n        query ComponentListQuery {\n          components: allSitePage(\n            filter: { context: { source: { eq: \"formation-react\" } } }\n            sort: { fields: [context___name], order: ASC }\n          ) {\n            edges {\n              node {\n                path\n                context {\n                  source\n                  name\n                }\n              }\n            }\n          }\n        }\n      `}\n      render={data => (\n        <SidebarItems\n          items={data.components.edges.map(comp => ({\n            href: comp.node.path,\n            name: comp.node.context.name,\n          }))}\n        />\n      )}\n    />\n  );\n}\n\nfunction SidebarItem({ item }) {\n  if (item.href) {\n    return (\n      <li key={item.name}>\n        <Link to={item.href}>{item.name}</Link>\n      </li>\n    );\n  }\n  return <li key={item.name}>{item.name} (future)</li>;\n}\n\nexport default function SidebarItems({ items, isSublist = false }) {\n  if (!items.length) {\n    return null;\n  }\n\n  return (\n    <ul className=\"site-c-sidenav-list\">\n      {items.map(item => {\n        if (item.items) {\n          return (\n            <li key={item.name}>\n              {isSublist && <SidebarItem item={item} />}\n              {!isSublist && <h2 className=\"heading-level-4\">{item.name}</h2>}\n              <SidebarItems isSublist items={item.items} />\n            </li>\n          );\n        }\n        if (item.query === 'componentList') {\n          return (\n            <li key={item.name}>\n              {isSublist && <SidebarItem item={item} />}\n              {!isSublist && <h2 className=\"heading-level-4\">{item.name}</h2>}\n              <ComponentList />\n            </li>\n          );\n        }\n        return <SidebarItem item={item} key={item.name} />;\n      })}\n    </ul>\n  );\n}\n","import React from 'react';\nimport SidebarItems from './SidebarItems';\nimport sidebarData from '../../sidebar';\n\n/**\n * Sidebar\n *\n * @param {props} props\n */\n\nexport default function Sidebar({ location }) {\n  const sidebarSection = sidebarData.sections.find(section =>\n    location.pathname.includes(section.href),\n  );\n\n  if (!sidebarSection) {\n    return null;\n  }\n\n  return (\n    <div className=\"vads-l-col--4 site-c-content__nav\">\n      <div className=\"site-c-sidenav\">\n        <SidebarItems items={sidebarSection.items} />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function EditLink({ sourceUrl }) {\n  return sourceUrl ? (\n    <div>\n      <i class=\"fa fa-edit\" aria-hidden=\"true\" />{' '}\n      <a href={sourceUrl}>Edit this page on GitHub</a>\n    </div>\n  ) : null;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Sidebar from '../components/sidebar/Sidebar';\nimport EditLink from '../components/EditLink';\nimport Layout from './Layout';\n\n/**\n * SidebarLayout\n *\n * @class SidebarLayout\n * @extends {React.Component}\n */\nexport default function SidebarLayout({ children, location, pageContext }) {\n  return (\n    <Layout location={location}>\n      <div className=\"vads-l-row\">\n        <Sidebar location={location} />\n        <div\n          id=\"main-content\"\n          className=\"vads-l-col--8 site-c-content__content docSearch-content\"\n        >\n          {children}\n          <EditLink sourceUrl={pageContext.sourceUrl} />\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nSidebarLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/jenkins/workspace/ran-facing-services-tools_master/packages/documentation/src/layouts/SidebarLayout.jsx\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"writing-a-unit-test\"\n    }}>{`Writing a unit test`}</h1>\n    <p>{`All new code that is added to `}<inlineCode parentName=\"p\">{`vets-website`}</inlineCode>{` should be unit tested and unit tests should cover at least 75% of code paths. Write unit tests as you build to make sure your form (or other component) is behaving as you expect and to help guard against future bugs.`}</p>\n    <p>{`For example, you might create a unit test file for each page in a form and then test the following scenarios:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The correct number of inputs show up when you render the page.`}</li>\n      <li parentName=\"ul\">{`The correct number of fields display validation errors if you submit without entering any information.`}</li>\n      <li parentName=\"ul\">{`Any conditional logic on the page displays under the correct conditions.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"unit-test-overview\"\n    }}>{`Unit test overview`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`The `}<inlineCode parentName=\"li\">{`vets-website`}</inlineCode>{` repo uses:`}<ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"https://mochajs.org/\"\n            }}>{`Mocha`}</a>{` for running unit tests`}</li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"http://chaijs.com/\"\n            }}>{`Chai`}</a>{` for test assertions`}</li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"https://airbnb.io/enzyme/\"\n            }}>{`Enzyme`}</a>{` for mounting and inspecting React components`}</li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"https://sinonjs.org/\"\n            }}>{`Sinon`}</a>{` for stubs and spies`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`Unit tests are `}<strong parentName=\"li\">{`collocated with the application folder`}</strong>{` in a test directory that matches the application directory structure:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`- 📂 src\n  - 📂 my-application\n    - 📂 components\n      - MyComponent.jsx\n    - 📂 tests\n      - 📂 components\n        - MyComponent.unit.spec.jsx\n`}</code></pre>\n    <p>{`Mocha runs any `}<em parentName=\"p\">{`file_name`}</em>{`.unit.spec.js file located in the `}<inlineCode parentName=\"p\">{`/src`}</inlineCode>{` folder. This file is usually located in a test directory close to the code being tested.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"/getting-started/common-tasks/test\"\n      }}>{`Run the test`}</a>{` locally through npm script commands, during the Jenkins build (Unit), and after merging to master.`}</p>\n    <h2 {...{\n      \"id\": \"unit-test-conventions\"\n    }}>{`Unit test conventions`}</h2>\n    <p>{`Use the following conventions when writing a unit test.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'enzyme';\nimport MyComponent from '../../components/MyComponent';\n\ndescribe('my-application', () => {\n  describe('MyComponent', () => {\n    it('renders privacy act disclosure when state.show is true', () => {\n        const wrapper = shallow(<MyComponent />);\n        ...\n        expect(someCondition).to.be.true;\n\n        wrapper.unmount();\n    })\n  });\n});\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Use `}<inlineCode parentName=\"li\">{`describe`}</inlineCode>{` to organize tests by application and feature. Two levels is adequate depending on the size of the application being tested.`}</li>\n      <li parentName=\"ul\">{`Use `}<inlineCode parentName=\"li\">{`it`}</inlineCode>{` to describe the unit test:`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Use active voice.`}</li>\n          <li parentName=\"ul\">{`Describe the behavior in terms specific to the unit.`}</li>\n          <li parentName=\"ul\">{`Do not abstract the test description with business logic.`}</li>\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Recommended`}</strong>{`:`}<ul parentName=\"li\">\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`it('truncates the address property when it is longer than 15 characters')`}</inlineCode></li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`it('renders an error when props.errors contains at least one item')`}</inlineCode></li>\n            </ul></li>\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Not recommended`}</strong>{`:`}<ul parentName=\"li\">\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`it('shortens the address when the user has a long address')`}</inlineCode></li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`it('shows an error when the user is not logged in')`}</inlineCode></li>\n            </ul></li>\n          <li parentName=\"ul\">{`Use Enzyme's `}<a parentName=\"li\" {...{\n              \"href\": \"https://airbnb.io/enzyme/docs/api/shallow.html\"\n            }}>{`shallow`}</a>{` instead of `}<a parentName=\"li\" {...{\n              \"href\": \"https://airbnb.io/enzyme/docs/api/mount.html\"\n            }}>{`mount`}</a>{` when possible to test components.`}</li>\n          <li parentName=\"ul\">{`Always `}<inlineCode parentName=\"li\">{`unmount`}</inlineCode>{` components at the end of the test.`}</li>\n        </ul></li>\n    </ul>\n    <h2 {...{\n      \"id\": \"unit-tests-for-forms-pages\"\n    }}>{`Unit tests for forms pages`}</h2>\n    <p>{`Use the following guidelines when writing a unit test for forms pages.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import { DefinitionTester } from 'platform/testing/unit/schemaform-utils';\n\ndescribe('MyForm FormID', () => {\n\nconst {\n    schema,\n    uiSchema,\n    arrayPath,\n  } = formConfig.chapters.myFormChapter.pages.myFormPage;\n\n  it('renders myFormPage form', () => {\n    const form = mount(\n      <DefinitionTester\n        arrayPath={arrayPath}\n        pagePerItemIndex={0}\n        definitions={formConfig.defaultDefinitions}\n        schema={schema}\n        data={initialData}\n        formData={initialData}\n        uiSchema={uiSchema}\n      />,\n    );\n\n    expect(form.find('select').length).to.equal(6); // from/to months, days; country, state\n    expect(form.find('input').length).to.equal(4); // facility name, from/to years, city\n    form.unmount();\n  });\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Organize forms config tests by page.`}</li>\n      <li parentName=\"ul\">{`Use `}<inlineCode parentName=\"li\">{`<DefinitionTester />`}</inlineCode>{` to render form configs for testing.`}</li>\n      <li parentName=\"ul\">{`Test at least the following:`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Number of each type of input is rendered (example above)`}</li>\n          <li parentName=\"ul\">{`Any conditional display logic on the page`}</li>\n          <li parentName=\"ul\">{`All field level validation errors`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`Use the other `}<inlineCode parentName=\"li\">{`schemaform-utils`}</inlineCode>{` for filling out form data:`}</li>\n    </ul>\n    <blockquote>\n      <ul parentName=\"blockquote\">\n        <li parentName=\"ul\"><inlineCode parentName=\"li\">{`fillData()`}</inlineCode>{` - Enzyme helper that fires a change event with a value for an element at the given selector`}</li>\n      </ul>\n      <pre parentName=\"blockquote\"><code parentName=\"pre\" {...{}}>{`fillData(\n  form, // mounted <DefinitionTester />\n  'select#root_blah' // selector\n  'USA', // value\n);\n`}</code></pre>\n    </blockquote>\n    <blockquote>\n      <ul parentName=\"blockquote\">\n        <li parentName=\"ul\"><inlineCode parentName=\"li\">{`fillDate()`}</inlineCode>{` - Enzyme helper that fills in a date field with data from the given date string`}</li>\n      </ul>\n      <pre parentName=\"blockquote\"><code parentName=\"pre\" {...{}}>{`fillDate(\n  form, // mounted <DefinitionTester />\n  'select#root_blah' // selector\n  '1950-1-3', // value\n);\n`}</code></pre>\n    </blockquote>\n    <blockquote>\n      <ul parentName=\"blockquote\">\n        <li parentName=\"ul\"><inlineCode parentName=\"li\">{`selectCheckbox()`}</inlineCode>{` - Enzyme helper that fires a change event with a value for a checkbox at the given name`}</li>\n      </ul>\n    </blockquote>\n    <h2 {...{\n      \"id\": \"example-unit-tests\"\n    }}>{`Example unit tests`}</h2>\n    <p>{`VSP provides helper utilities to make writing tests easier. The following example unit tests illustrate some of these helpers. You can find these unit tests in the `}<inlineCode parentName=\"p\">{`vets-website`}</inlineCode>{` repo in the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/applications/vic-v2/tests/config/veteranInformation.unit.spec.jsx\"\n      }}>{`veteranInformation.unit.spec.jsx`}</a>{` file.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import React from 'react';\nimport { expect } from 'chai';\nimport sinon from 'sinon';\nimport { mount } from 'enzyme';\n\nimport { DefinitionTester, fillData, selectRadio, fillDate } from '../../../../platform/testing/unit/schemaform-utils.jsx';\nimport formConfig from '../config/form.js';\n\ndescribe('VIC veteran information', () => {\n  const { schema, uiSchema } = formConfig.chapters.veteranInformation.pages.veteranInformation;\n  it('should render', () => {\n    const form = mount(\n      <DefinitionTester\n        definitions={formConfig.defaultDefinitions}\n        schema={schema}\n        data=\\\\{{}}\n        uiSchema={uiSchema}\n        />\n    );\n\n    expect(form.find('input').length).to.equal(7);\n    expect(form.find('select').length).to.equal(4);\n  });\n\n  ...\n});\n`}</code></pre>\n    <p>{`Helpers are imported from `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/platform/testing/unit/schemaform-utils.jsx\"\n      }}><inlineCode parentName=\"a\">{`schemaform-utils.jsx`}</inlineCode></a>{`. The `}<inlineCode parentName=\"p\">{`DefinitionTester`}</inlineCode>{` is a component you can use to simulate a page being rendered without having to set up a whole form application with all the dependencies.`}</p>\n    <p>{`This example uses `}<a parentName=\"p\" {...{\n        \"href\": \"http://airbnb.io/enzyme/\"\n      }}>{`Enzyme`}</a>{` and mounts a `}<inlineCode parentName=\"p\">{`DefinitionTester`}</inlineCode>{` component that is passed in the schema information from the `}<inlineCode parentName=\"p\">{`veteranInformation`}</inlineCode>{` page as props. The test checks to make sure there are 7 `}<inlineCode parentName=\"p\">{`input`}</inlineCode>{` and 4 `}<inlineCode parentName=\"p\">{`select`}</inlineCode>{` entries on the page. When there are errors with definitions on the form pages, you will often see inputs not being rendered, so this helps check for that scenario.`}</p>\n    <p>{`The next test in the file checks to see that the right fields are marked as required:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`  it('should not submit without required info', () => {\n    const onSubmit = sinon.spy();\n    const form = mount(\n      <DefinitionTester\n        onSubmit={onSubmit}\n        definitions={formConfig.defaultDefinitions}\n        schema={schema}\n        data=\\\\{{}}\n        uiSchema={uiSchema}\n        />\n    );\n\n    form.find('form').simulate('submit');\n\n    expect(form.find('.usa-input-error').length).to.equal(6);\n    expect(onSubmit.called).to.be.false;\n  });\n`}</code></pre>\n    <p>{`This test simulates a form submission and then counts the number of error elements on the page, which is expected to be 6. The test checks that the existing validation rules are still generally in place and that additional rules haven't been added.`}</p>\n    <p>{`Finally, this example test fills in all the data and submits the form:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`  it('should submit with all info filled in', () => {\n    const onSubmit = sinon.spy();\n    const form = mount(\n      <DefinitionTester\n        onSubmit={onSubmit}\n        definitions={formConfig.defaultDefinitions}\n        schema={schema}\n        data={{}}\n        uiSchema={uiSchema}\n        />\n    );\n\n    fillData(form, 'input#root_veteranFullName_first', 'test');\n    fillData(form, 'input#root_veteranFullName_last', 'test2');\n    fillData(form, 'input#root_veteranSocialSecurityNumber', '233224343');\n    selectRadio(form, 'root_gender', 'F');\n    fillDate(form, 'root_veteranDateOfBirth', '1920-01-04');\n    fillData(form, 'select#root_serviceBranch', 'F');\n    form.find('form').simulate('submit');\n\n    expect(form.find('.usa-input-error').length).to.equal(0);\n    expect(onSubmit.called).to.be.true;\n  });\n`}</code></pre>\n    <p>{`Helper functions make the correct Enzyme calls to fill in data, so there isn't a lot of repeated code. The helpers are documented in the `}<inlineCode parentName=\"p\">{`schemaform-utils.jsx`}</inlineCode>{` file. The helpers fill in data and then check that the right number of inputs appear on the page after that change. Some of the tests also directly test logic in `}<inlineCode parentName=\"p\">{`depends`}</inlineCode>{` functions on the page configuration. `}</p>\n    <h2 {...{\n      \"id\": \"other-utilities\"\n    }}>{`Other utilities`}</h2>\n    <p>{`These utilities can be found in `}<inlineCode parentName=\"p\">{`platform/testing/unit/helpers.js`}</inlineCode>{`:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`mockFetch()`}</inlineCode>{` -  A function to mock the global fetch function and return the value provided in returnVal`}<ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`resetFetch()`}</inlineCode>{` - Resets the mocked fetch set with `}<inlineCode parentName=\"li\">{`mockFetch()`}</inlineCode></li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`mockApiRequest()`}</inlineCode>{` - Decorated `}<inlineCode parentName=\"li\">{`mockFetch()`}</inlineCode>{` that adds typical API headers to `}<inlineCode parentName=\"li\">{`returnVal`}</inlineCode></li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`mockMultipleApiRequests()`}</inlineCode>{` - Decorated `}<inlineCode parentName=\"li\">{`mockFetch()`}</inlineCode>{` that mocks a fetch call for each response object in an array`}</li>\n        </ul></li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`mockFetch(\n  new Error('fake error'), // returnVal\n  false, // shouldResolve: false returns rejected promise. default is true\n);\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Note:`}</strong>{` This utility can be found in `}<inlineCode parentName=\"p\">{`platform/utilities/storage/localstorage.js`}</inlineCode>{`.`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`getLocalStorage()`}</inlineCode>{` - convenience accessor for local storage and implements a fallback. Useful for stubbing localstorage.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"legacy-tools\"\n    }}>{`Legacy tools`}</h2>\n    <p>{`While ReactTestUtils and SkinDeep are used in many of our tests, use Enzyme for any updated or new tests.`}</p>\n    <h2 {...{\n      \"id\": \"libraries\"\n    }}>{`Libraries`}</h2>\n    <p>{`Unit tests use the following libraries:`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://mochajs.org/\"\n        }}>{`mocha.js`}</a>{`: Test framework.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://www.chaijs.com/\"\n        }}>{`chai.js`}</a>{`: BDD / TDD assertion library.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/domenic/chai-as-promised\"\n        }}>{`chai-as-promised`}</a>{`: Extends Chai with assertions about promises.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://sinonjs.org/\"\n        }}>{`sinon.js`}</a>{`: Standalone test spies, stubs and mocks.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://airbnb.io/enzyme/\"\n        }}>{`enzyme`}</a>{`: Enzyme is a JavaScript Testing utility for React that makes it easier to test your React Components' output. You can also manipulate, traverse, and in some ways simulate runtime given the output.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://www.npmjs.com/package/enzyme-adapter-react-16\"\n        }}>{`enzyme-adapter-react-16`}</a>{`: Enzyme React 16 integration.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://www.npmjs.com/package/react-dom\"\n        }}>{`react-dom`}</a>{`: React DOM Library needed for testing React Components.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://reactjs.org/docs/test-utils.html\"\n        }}>{`react-dom/test-utils`}</a>{`: Test utilities for React DOM.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://www.npmjs.com/package/react-test-renderer\"\n        }}>{`react-test-renderer`}</a>{`: This package provides an experimental React renderer that can be used to render React components to pure JavaScript objects, without depending on the DOM or a native mobile environment.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://airbnb.io/enzyme/docs/guides/jsdom.html\"\n        }}>{`jsdom`}</a>{`: A JavaScript implementation of the WHATWG DOM and HTML standards, for use with node.js.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://www.npmjs.com/package/mocha-junit-reporter\"\n        }}>{`mocha-junit-reporter`}</a>{`: Produces JUnit-style XML test results. This is used specifically for Jenkins so it can output and track test results in its system.`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/lennym/choma\"\n        }}>{`choma`}</a>{`: Random execution order for mocha suites.`}</li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}
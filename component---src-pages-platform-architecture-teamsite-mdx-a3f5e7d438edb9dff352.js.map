{"version":3,"sources":["webpack:///./src/components/sidebar/SidebarItems.jsx","webpack:///./src/components/sidebar/Sidebar.js","webpack:///./src/components/EditLink.jsx","webpack:///./src/layouts/SidebarLayout.jsx","webpack:///./src/pages/platform/architecture/teamsite.mdx","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"names":["SidebarItem","item","href","key","name","to","SidebarItems","items","isSublist","length","className","map","Sidebar","location","sidebarSection","sidebarData","sections","find","section","pathname","includes","EditLink","sourceUrl","class","aria-hidden","SidebarLayout","children","pageContext","Layout","id","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent","_objectWithoutPropertiesLoose","source","excluded","i","target","sourceKeys","Object","keys","indexOf"],"mappings":"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","file":"component---src-pages-platform-architecture-teamsite-mdx-a3f5e7d438edb9dff352.js","sourcesContent":["import React from 'react';\nimport { Link } from 'gatsby';\n\n/**\n * Sidebar\n *\n * @param {props} props\n */\n\nfunction SidebarItem({ item }) {\n  if (item.href) {\n    return (\n      <li key={item.name}>\n        <Link to={item.href}>{item.name}</Link>\n      </li>\n    );\n  }\n  return <li key={item.name}>{item.name} (future)</li>;\n}\n\nexport default function SidebarItems({ items, isSublist = false }) {\n  if (!items.length) {\n    return null;\n  }\n\n  return (\n    <ul className=\"site-c-sidenav-list\">\n      {items.map(item => {\n        if (item.items) {\n          return (\n            <li key={item.name}>\n              {isSublist && <SidebarItem item={item} />}\n              {!isSublist && <h2 className=\"heading-level-4\">{item.name}</h2>}\n              <SidebarItems isSublist items={item.items} />\n            </li>\n          );\n        }\n        return <SidebarItem item={item} key={item.name} />;\n      })}\n    </ul>\n  );\n}\n","import React from 'react';\nimport SidebarItems from './SidebarItems';\nimport sidebarData from '../../sidebar';\n\n/**\n * Sidebar\n *\n * @param {props} props\n */\n\nexport default function Sidebar({ location }) {\n  const sidebarSection = sidebarData.sections.find(section =>\n    location.pathname.includes(section.href),\n  );\n\n  if (!sidebarSection) {\n    return null;\n  }\n\n  return (\n    <div className=\"vads-l-col--4 site-c-content__nav\">\n      <div className=\"site-c-sidenav\">\n        <SidebarItems items={sidebarSection.items} />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function EditLink({ sourceUrl }) {\n  return sourceUrl ? (\n    <div>\n      <i class=\"fa fa-edit\" aria-hidden=\"true\" />{' '}\n      <a href={sourceUrl}>Edit this page on GitHub</a>\n    </div>\n  ) : null;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Sidebar from '../components/sidebar/Sidebar';\nimport EditLink from '../components/EditLink';\nimport Layout from './Layout';\n\n/**\n * SidebarLayout\n *\n * @class SidebarLayout\n * @extends {React.Component}\n */\nexport default function SidebarLayout({ children, location, pageContext }) {\n  return (\n    <Layout location={location}>\n      <div className=\"vads-l-row\">\n        <Sidebar location={location} />\n        <div\n          id=\"main-content\"\n          className=\"vads-l-col--8 site-c-content__content docSearch-content\"\n        >\n          {children}\n          <EditLink sourceUrl={pageContext.sourceUrl} />\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nSidebarLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/jenkins/workspace/ran-facing-services-tools_master/packages/documentation/src/layouts/SidebarLayout.jsx\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"teamsite-overview\"\n    }}>{`Teamsite Overview`}</h1>\n    <p>{`Updated from `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/department-of-veterans-affairs/vets.gov-team/issues/12779#issue-356005850\"\n      }}>{`TeamSite Technical Solution and Implementation`}</a></p>\n    <p>{`EWIS serves much of the existing content on `}<a parentName=\"p\" {...{\n        \"href\": \"http://www.va.gov\"\n      }}>{`www.va.gov`}</a>{` (e.g. `}<a parentName=\"p\" {...{\n        \"href\": \"http://www.va.gov/health\"\n      }}>{`www.va.gov/health`}</a>{`) and to accomodate this our systems serve that request from our version of the site on sites that exist on the same domain.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"https://user-images.githubusercontent.com/215266/45632257-195abc80-ba5a-11e8-9f7c-76c63fb14ac4.png\",\n        \"alt\": \"ewis\"\n      }}></img></p>\n    <p>{`Requests to subdomain hosts such as `}<a parentName=\"p\" {...{\n        \"href\": \"http://www.benefits.va.gov\"\n      }}>{`www.benefits.va.gov`}</a>{` are not proxied through our systems and are not under our control. Content for these sites exists on TeamSite: a content management system utilized by the VA to manage content across several properties at the VA. Each property in TeamSite consists of perl-based template files, which on publish rendered content to a file store. The rendered content contains server side includes, which reference content from a directory called `}<inlineCode parentName=\"p\">{`va_files`}</inlineCode>{`, which has shared header and footer functionality.`}</p>\n    <p>{`There are no consistent staging/production environments for TeamSite properties, and there are multiple variants of header and footer functionality in `}<inlineCode parentName=\"p\">{`va_files`}</inlineCode>{` (attached to this issue). For properties that do have staging and production variants, they reference the same version of header and footer content. A change to the header or footer will affect both the staging and production versions of a property.`}</p>\n    <h2 {...{\n      \"id\": \"scripts-and-teamsite-administration\"\n    }}>{`Scripts and Teamsite Administration`}</h2>\n    <p>{`The header injection markup is added to Teamsite templates by their administrator. Current point of contact for this is:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Josh Tuscher `}<a parentName=\"li\" {...{\n          \"href\": \"mailto:Joshua.Tuscher@va.gov\"\n        }}>{`Joshua.Tuscher@va.gov`}</a></li>\n    </ul>\n    <p>{`Current markup added to Teamsite templates:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-html\"\n      }}>{`<style type=\"text/css\">.brand-consolidation-deprecated { display: none !important; } </style>\n<link rel=\"stylesheet\" href=\"https://prod-va-gov-assets.s3-us-gov-west-1.amazonaws.com/generated/styleConsolidated.css\" />\n<script type=\"text/javascript\" src=\"https://prod-va-gov-assets.s3-us-gov-west-1.amazonaws.com/js/settings.js\"></script>\n<script type=\"text/javascript\" src=\"https://prod-va-gov-assets.s3-us-gov-west-1.amazonaws.com/generated/polyfills.entry.js\"></script>\n<script type=\"text/javascript\" src=\"https://prod-va-gov-assets.s3-us-gov-west-1.amazonaws.com/generated/vendor.entry.js\"></script>\n<script type=\"text/javascript\" src=\"https://prod-va-gov-assets.s3-us-gov-west-1.amazonaws.com/generated/proxy-rewrite.entry.js\"></script>\n<script type=\"text/javascript\" src=\"https://prod-va-gov-assets.s3-us-gov-west-1.amazonaws.com/js/vendor/uswds.min.js\"></script>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"teamsite-behavior-and-whitelisting-pages\"\n    }}>{`Teamsite Behavior and Whitelisting Pages`}</h2>\n    <p>{`There are an unknown number of Teamsite templates that drive the `}<inlineCode parentName=\"p\">{`<head>`}</inlineCode>{` content on Teamsite pages and there are several pages that receive the above markup that `}<strong parentName=\"p\">{`should not`}</strong>{` show the va.gov header. The proxy rewrite application uses a `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/department-of-veterans-affairs/vets-website/blob/b770f380270722228563e56629af440c64342157/src/applications/proxy-rewrite/proxy-rewrite-whitelist.json\"\n      }}>{`whitelist`}</a>{` to drive the activation of the header content. Example whitelist entry:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n  \"hostname\": \"www.benefits.va.gov\",\n  \"pathnameBeginning\": \"/\",\n  \"cookieOnly\": false\n},\n`}</code></pre>\n    <p>{`Pages can be whitelisted in two ways:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`cookieOnly: false`}</inlineCode>{` - the header will always activate`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`cookieOnly: true`}</inlineCode>{` - the header will activate when `}<inlineCode parentName=\"li\">{`proxyRewrite`}</inlineCode>{` cookie is set to true.`}</li>\n    </ul>\n    <p>{`This cookie can be set in the console by running `}<inlineCode parentName=\"p\">{`document.cookie = \"proxyRewrite=true;\"`}</inlineCode></p>\n    <h3 {...{\n      \"id\": \"considerations-when-editing-and-testing-the-whitelist\"\n    }}>{`Considerations when editing and testing the whitelist`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Some Teamsites redirect to both `}<inlineCode parentName=\"li\">{`subdomain.va.gov`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`www.subdomain.va.gov`}</inlineCode>{` (sometimes alternating between the two). Always test the redirect behavior of the first level of links on the page and ensure that both hosts are whitelisted if necessary.`}</li>\n      <li parentName=\"ul\">{`New hostnames need to be added to our `}<inlineCode parentName=\"li\">{`allowed_origins`}</inlineCode>{` `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/department-of-veterans-affairs/devops/blob/c5687fc1b483eaea17a1191eb41440fb560d01d6/terraform/environments/dsva-vagov-prod/main.tf#L277\"\n        }}>{`here`}</a>{` and `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/department-of-veterans-affairs/devops/blob/c5687fc1b483eaea17a1191eb41440fb560d01d6/terraform/environments/dsva-vagov-prod/main.tf#L290\"\n        }}>{`here`}</a>{`. Subdomains are considered separate hostnames by CORS and the browser performs CORS checks on all of the webfonts injected by the Teamsite header scripts. Terraform updates are not automatically deployed- work with a Devops engineer to deploy these changes.`}</li>\n      <li parentName=\"ul\">{`There are at least two behaviors provided by the Teamsite system for adding the inline scripts to the page:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`as part of the initial document response, or`}</li>\n          <li parentName=\"ul\">{`injected as part of a Teamsite sourced JavaScript.`}</li>\n        </ul>\n      </li>\n    </ul>\n    <h1 {...{\n      \"id\": \"proxy-rewrite\"\n    }}>{`Proxy Rewrite`}</h1>\n    <p>{`The `}<inlineCode parentName=\"p\">{`proxy-rewrite`}</inlineCode>{` application is used to inject site-wide VA.gov components into pages that are outside of the `}<a parentName=\"p\" {...{\n        \"href\": \"http://www.va.gov\"\n      }}>{`www.va.gov`}</a>{` build and publish process. The affected sites are generally referred to as \"TeamSite\", because TeamSite is the name of the CMS use for those pages.`}</p>\n    <p>{`This works by -`}</p>\n    <ol>\n      <li parentName=\"ol\">{`A request is sent to a VA.gov website`}</li>\n      <li parentName=\"ol\">{`The content requested from the Teamsite servers and passed through the `}<a parentName=\"li\" {...{\n          \"href\": \"http://www.va.gov\"\n        }}>{`www.va.gov`}</a>{` proxy`}</li>\n      <li parentName=\"ol\">{`A code snippet included in the Teamsite page downloads the `}<inlineCode parentName=\"li\">{`proxy-rewrite`}</inlineCode>{` app which overwrites the Teamsite header and footer with VA.gov content`}</li>\n    </ol>\n    <p>{`Because the Teamsite template containing the `}<inlineCode parentName=\"p\">{`proxy-rewrite`}</inlineCode>{` snippet is used both on sites that should and shouldn't show the VA.gov header, the script is governed by an allow list contained in `}<inlineCode parentName=\"p\">{`proxy-rewrite-whitelist.json`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"local-dev\"\n    }}>{`Local Dev`}</h2>\n    <p>{`Since Teamsite content is not run through the `}<inlineCode parentName=\"p\">{`vets-website`}</inlineCode>{` build process, testing changes on Teamsite requires running local or staging changes against the production pages. The `}<inlineCode parentName=\"p\">{`proxy-rewrite`}</inlineCode>{` app supports targeting a specific environment for testing:`}</p>\n    <p>{`For example: `}<a parentName=\"p\" {...{\n        \"href\": \"https://staging.va.gov/health/?targetEnvironment=vagovstaging\"\n      }}>{`https://staging.va.gov/health/?targetEnvironment=vagovstaging`}</a></p>\n    <p>{`The default behavior for `}<a parentName=\"p\" {...{\n        \"href\": \"https://staging.va.gov/health\"\n      }}>{`https://staging.va.gov/health`}</a>{` is to load the production assets. when the `}<inlineCode parentName=\"p\">{`targetEnvironment`}</inlineCode>{` is set, the loader well delete the production nodes from the DOM and add script and style nodes for the target environment.`}</p>\n    <p>{`The injection script will support any of `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/department-of-veterans-affairs/vets-website/blob/master/src/site/constants/environments.js\"\n      }}>{`these`}</a>{` environment names set as the `}<inlineCode parentName=\"p\">{`targetEnvironment`}</inlineCode>{`.`}</p>\n    <p>{`Caveats:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Style node deletions will prompt a rebuilding of the CSSOM but removing script nodes doesn't undo any JS that was run before the JS node was removed. For most cases this should not impact testing as the application specific code doesn't run but JS that is executed before the application (e.g. polyfills) will always run the production code first.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"charles-proxy\"\n    }}>{`Charles Proxy`}</h2>\n    <p>{`You can also use an application called Charles Proxy to map the `}<inlineCode parentName=\"p\">{`proxy-rewrite`}</inlineCode>{` bundles of TeamSite pages to your local machine. This way you can navigate directly to `}<inlineCode parentName=\"p\">{`https://www.va.gov/health/`}</inlineCode>{` and when the request for the production bundle of `}<inlineCode parentName=\"p\">{`proxy-rewrite`}</inlineCode>{` is sent, Charles will have overridden that file to instead be served locally. Instructions to set this up are located here, `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/department-of-veterans-affairs/vets.gov-team/blob/master/Work%20Practices/Engineering/Teamsite.md\"\n      }}>{`https://github.com/department-of-veterans-affairs/vets.gov-team/blob/master/Work%20Practices/Engineering/Teamsite.md`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"teamsite-visual-regression-testing\"\n    }}>{`Teamsite Visual Regression Testing`}</h2>\n    <p>{`Both scripts compare production Teamsite header and footer against images in `}<inlineCode parentName=\"p\">{`vets-website`}</inlineCode>{` repo`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`npm run vrt`}</inlineCode>{` - test fails and generates diff images when images differ`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`npm run vrt:baseline`}</inlineCode>{` - test always succeeds and replaces existing baseline images when images differ`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`If no baseline images exist for a test, both scripts will`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`succeed on each test that has no baseline image and`}</li>\n          <li parentName=\"ul\">{`generate a new baseline image for it.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Diff images are removed automatically when their associated test succeeds.`}</p>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"details\"\n    }}>{`Details`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`compares snapsshots of `}<inlineCode parentName=\"li\">{`<header>`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`.footerNav`}</inlineCode>{` on current subdomain Teamsite pages`}</li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/americanexpress/jest-image-snapshot\"\n        }}>{`jest-image-snapshot`}</a>{` uses `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/mapbox/pixelmatch\"\n        }}>{`pixelmatch`}</a>{` to detect failure`}</li>\n      <li parentName=\"ul\">{`Diff images show `}<strong parentName=\"li\">{`left center right`}</strong>{` the `}<strong parentName=\"li\">{`baseline diff new`}</strong>{` images\n`}<span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"954px\"\n          }\n        }}>{`\n      `}<a parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-link\",\n            \"href\": \"/veteran-facing-services-tools/static/e29b7d031ac4d672906b0209d4ef1b20/eb2af/diff-image-example.png\",\n            \"style\": {\n              \"display\": \"block\"\n            },\n            \"target\": \"_blank\",\n            \"rel\": \"noopener\"\n          }}>{`\n    `}<span parentName=\"a\" {...{\n              \"className\": \"gatsby-resp-image-background-image\",\n              \"style\": {\n                \"paddingBottom\": \"59.07335907335908%\",\n                \"position\": \"relative\",\n                \"bottom\": \"0\",\n                \"left\": \"0\",\n                \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbElEQVQozz1S3U9ScRj+AQGO0kC0WkbmRFZNAfmQDxE4fvA940PNIguipUICBw2BvGnNi7xpZUEXXTTbvGqrv6TL1lVbrnW+aHA42HUvUL579jvnt/M87/u873tQt7sgmc2jKRzZcIEjhwwp72bluFGnKIpuB0lSf7h6qfKZb8+JsC2gtZEVw3uPKy91F7rn8jL39unZx0i37tssN0FM0wwDYDriJ29BnJV5Cmdb/G0+iJ2bSDK91TOXl8xsnXLgImcO6ZOuzOuOmGaqJ5WL5U/ImoYCYmdOaMdBLAKbrcqQbyYntKUFdhzpofKbtphhfv2gKfKksmAqK/cWhQ6cZ8vwJtNdWA512dMSDJdY1/sn4gJbGulWPZlXHFsj6d/M0Tfm6CtBVUFc2P+IjGtnsCwyJ3mWFN+6IbZnkAqLa71rw9h9vSUyYFgUKn3+WIlrsC3P5M/q9y8ESUGu3f0Pg5MrOn9SYYleMkdl6jAAjThj+kBK5YwpTMvnDUsipdcfKzYbLFOtgmfomCBJjq3v7h8M2VYm5h8NmJYHTLdk6hAAKR33rk7H+8YXzukX+8YjHTHXXlUraIogCLg+e3lw2RK9MnkHOP26BelYCIDUnof6QHJ07sGw/e5F403xiC8QLzW5BtMOmDZUbrC15+VDaNA43/IIKXo1YZkmjDSeVTADJ4ivzyYUlts3EjvQM/M/YGdw3ascXptJmIMbKiwGZoE5aI0iYEMmgHQs2KsJCZVeX6zYYP/9YXCCbRjB0xfv5doIyC4YlqSjQSADUOcBgAHAZ7ANYrZea+23HSA+5tidvXeCIZdcG+4wO/gLgdVNwRhqrt4AAAAASUVORK5CYII=')\",\n                \"backgroundSize\": \"cover\",\n                \"display\": \"block\"\n              }\n            }}></span>{`\n  `}<img parentName=\"a\" {...{\n              \"className\": \"gatsby-resp-image-image\",\n              \"alt\": \"Example Diff Image\",\n              \"title\": \"Example Diff Image\",\n              \"src\": \"/veteran-facing-services-tools/static/e29b7d031ac4d672906b0209d4ef1b20/eb2af/diff-image-example.png\",\n              \"srcSet\": [\"/veteran-facing-services-tools/static/e29b7d031ac4d672906b0209d4ef1b20/a2ead/diff-image-example.png 259w\", \"/veteran-facing-services-tools/static/e29b7d031ac4d672906b0209d4ef1b20/6b9fd/diff-image-example.png 518w\", \"/veteran-facing-services-tools/static/e29b7d031ac4d672906b0209d4ef1b20/eb2af/diff-image-example.png 954w\"],\n              \"sizes\": \"(max-width: 954px) 100vw, 954px\",\n              \"style\": {\n                \"width\": \"100%\",\n                \"height\": \"100%\",\n                \"margin\": \"0\",\n                \"verticalAlign\": \"middle\",\n                \"position\": \"absolute\",\n                \"top\": \"0\",\n                \"left\": \"0\"\n              },\n              \"loading\": \"lazy\"\n            }}></img>{`\n  `}</a>{`\n    `}</span></li>\n    </ul>\n    <h2 {...{\n      \"id\": \"what-to-do-when-the-test-fails\"\n    }}>{`What To Do When The Test Fails`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`If needed, run `}<inlineCode parentName=\"li\">{`npm run vrt`}</inlineCode>{` locally`}</li>\n      <li parentName=\"ul\">{`The test log will show a`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Summary of successes and failures\n`}<span parentName=\"li\" {...{\n              \"className\": \"gatsby-resp-image-wrapper\",\n              \"style\": {\n                \"position\": \"relative\",\n                \"display\": \"block\",\n                \"marginLeft\": \"auto\",\n                \"marginRight\": \"auto\",\n                \"maxWidth\": \"632px\"\n              }\n            }}>{`\n      `}<a parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-link\",\n                \"href\": \"/veteran-facing-services-tools/static/2f6dfa87d1242624eed4ea0b0b1284a2/084e2/vrt-test-summary-example.png\",\n                \"style\": {\n                  \"display\": \"block\"\n                },\n                \"target\": \"_blank\",\n                \"rel\": \"noopener\"\n              }}>{`\n    `}<span parentName=\"a\" {...{\n                  \"className\": \"gatsby-resp-image-background-image\",\n                  \"style\": {\n                    \"paddingBottom\": \"67.18146718146718%\",\n                    \"position\": \"relative\",\n                    \"bottom\": \"0\",\n                    \"left\": \"0\",\n                    \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTElEQVQoz4VSW26DMBDkaUySJnz2BCkP29jgB5DHBXqI3v8WHZtEalWVSCNrDTs7s+uNPsVomI46kz2RemgA8UnfjvpW2fvbeAX2atkPl5Ocv+a7GZeo7e3Z3qickZozCyAg3ObcJq2m/VSIqewnfCmEw19cC2Y6Ob1zG8W1Spku+xn/kEqFz0NwGC5xPURnGX2oXzj/iEkzlMyWcvYlhfPgbuUT7tJWRyjxB0k9+NIlt5W+VuaO1NU5uiXBPJjJP+QHUtjuRgiSVdbb9udOLb42vG2Q82agvdvLBW3DPEBD8xgs+k+3lSkz0IybMWnHpPFADE4cAly3yFmjCmEP6gLlnZx3QRABntczt21ntcqYpo9R+xPTQtvr4yUvbR/1lTC3rlSAzjvM3ID52jbhJuhMzyWB7HNJXthuVM50oLlSeHLhn8rbJmFDN8jfn91myihA6WoAAAAASUVORK5CYII=')\",\n                    \"backgroundSize\": \"cover\",\n                    \"display\": \"block\"\n                  }\n                }}></span>{`\n  `}<img parentName=\"a\" {...{\n                  \"className\": \"gatsby-resp-image-image\",\n                  \"alt\": \"Test Summary Example\",\n                  \"title\": \"Test Summary Example\",\n                  \"src\": \"/veteran-facing-services-tools/static/2f6dfa87d1242624eed4ea0b0b1284a2/084e2/vrt-test-summary-example.png\",\n                  \"srcSet\": [\"/veteran-facing-services-tools/static/2f6dfa87d1242624eed4ea0b0b1284a2/a2ead/vrt-test-summary-example.png 259w\", \"/veteran-facing-services-tools/static/2f6dfa87d1242624eed4ea0b0b1284a2/6b9fd/vrt-test-summary-example.png 518w\", \"/veteran-facing-services-tools/static/2f6dfa87d1242624eed4ea0b0b1284a2/084e2/vrt-test-summary-example.png 632w\"],\n                  \"sizes\": \"(max-width: 632px) 100vw, 632px\",\n                  \"style\": {\n                    \"width\": \"100%\",\n                    \"height\": \"100%\",\n                    \"margin\": \"0\",\n                    \"verticalAlign\": \"middle\",\n                    \"position\": \"absolute\",\n                    \"top\": \"0\",\n                    \"left\": \"0\"\n                  },\n                  \"loading\": \"lazy\"\n                }}></img>{`\n  `}</a>{`\n    `}</span></li>\n          <li parentName=\"ul\">{`Failure details for each test with path to diff image for failure\n`}<span parentName=\"li\" {...{\n              \"className\": \"gatsby-resp-image-wrapper\",\n              \"style\": {\n                \"position\": \"relative\",\n                \"display\": \"block\",\n                \"marginLeft\": \"auto\",\n                \"marginRight\": \"auto\",\n                \"maxWidth\": \"733px\"\n              }\n            }}>{`\n      `}<a parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-link\",\n                \"href\": \"/veteran-facing-services-tools/static/26804a1ddc9a185b4a0079b6ca5f60b9/00b70/cli-failure-example.png\",\n                \"style\": {\n                  \"display\": \"block\"\n                },\n                \"target\": \"_blank\",\n                \"rel\": \"noopener\"\n              }}>{`\n    `}<span parentName=\"a\" {...{\n                  \"className\": \"gatsby-resp-image-background-image\",\n                  \"style\": {\n                    \"paddingBottom\": \"42.471042471042466%\",\n                    \"position\": \"relative\",\n                    \"bottom\": \"0\",\n                    \"left\": \"0\",\n                    \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABIUlEQVQY032R3W6DMAyFQxkkaQtVq64UrdrVJBIaAnZCofzs/R9rLrvZpG7Sp+jE8Yljh0mNx8rJq0sNfrMzmBi3q1xU+tW1DUsfLOKFMG1IkasPtJP1nQnbp+3n/janfk78vMEpMl1UdbHt4qqjDGE7TsL2m+a+hUHUvXxEbhsc2cG4D4uZcReL79blxp9LvJSYL5w1ZvqxvpV40phryDTQ9qSavO7YUUGm4FWDLCAqmriAWAF/gCQihVyjWIg1Uo9CLVpBanu2oiQYQ3Nb+zlt562fDjAf6mFl2tj21B5T+IQCOJlDBaK5k1nimLgpwSFx444uctMWx+hvs1gqg8SZRhIUwAoMloMf4H+V6dkcRl7362YgOA3ZOPqJ557f5i/dskEdrzHKrwAAAABJRU5ErkJggg==')\",\n                    \"backgroundSize\": \"cover\",\n                    \"display\": \"block\"\n                  }\n                }}></span>{`\n  `}<img parentName=\"a\" {...{\n                  \"className\": \"gatsby-resp-image-image\",\n                  \"alt\": \"Failure Detail Example\",\n                  \"title\": \"Failure Detail Example\",\n                  \"src\": \"/veteran-facing-services-tools/static/26804a1ddc9a185b4a0079b6ca5f60b9/00b70/cli-failure-example.png\",\n                  \"srcSet\": [\"/veteran-facing-services-tools/static/26804a1ddc9a185b4a0079b6ca5f60b9/a2ead/cli-failure-example.png 259w\", \"/veteran-facing-services-tools/static/26804a1ddc9a185b4a0079b6ca5f60b9/6b9fd/cli-failure-example.png 518w\", \"/veteran-facing-services-tools/static/26804a1ddc9a185b4a0079b6ca5f60b9/00b70/cli-failure-example.png 733w\"],\n                  \"sizes\": \"(max-width: 733px) 100vw, 733px\",\n                  \"style\": {\n                    \"width\": \"100%\",\n                    \"height\": \"100%\",\n                    \"margin\": \"0\",\n                    \"verticalAlign\": \"middle\",\n                    \"position\": \"absolute\",\n                    \"top\": \"0\",\n                    \"left\": \"0\"\n                  },\n                  \"loading\": \"lazy\"\n                }}></img>{`\n  `}</a>{`\n    `}</span></li>\n        </ul>\n      </li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`If failure is caused by production issue`}</strong>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Repair issue and publish to production`}</li>\n          <li parentName=\"ul\">{`Verify `}<inlineCode parentName=\"li\">{`npm run test:vrt`}</inlineCode>{` succeeds`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`If failure is caused by an update`}</strong>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Run `}<inlineCode parentName=\"li\">{`npm run test:vrt:baseline`}</inlineCode></li>\n          <li parentName=\"ul\">{`Check in new baseline images to `}<inlineCode parentName=\"li\">{`vets-website`}</inlineCode></li>\n        </ul>\n      </li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}"],"sourceRoot":""}